import{BOOTSTRAP_END as e,INIT as t,INIT_MODULE as o}from"lwr/metrics";import{logOperationStart as n,logOperationEnd as i}from"lwr/profiler";import{hydrateComponent as r,createElement as s}from"lwc";let c=0;async function l(){const e=function(e){if(!globalThis.performance||!function(){const e=globalThis,{SSREnabled:t}=e.LWR&&e.LWR.env||{};return!!t}())return{shouldYield:!1,timeOfLastYield:e};const t=50,o=globalThis.performance.now();if(o-e>t)return{shouldYield:!0,timeOfLastYield:o};return{shouldYield:!1,timeOfLastYield:e}}(c);e.shouldYield&&(c=e.timeOfLastYield,await async function(){const e=globalThis.scheduler;return function(e){let t,o=e[0],n=1;for(;n<e.length;){const i=e[n],r=e[n+1];if(n+=2,("optionalAccess"===i||"optionalCall"===i)&&null==o)return;"access"===i||"optionalAccess"===i?(t=o,o=r(o)):"call"!==i&&"optionalCall"!==i||(o=r(((...e)=>o.call(t,...e))),t=void 0)}return o}([e,"optionalAccess",e=>e.yield])?e.yield():new Promise((e=>setTimeout(e,0)))}())}const a="lwr:hydrate",d="visible";function f(e,t,o){r(e,t,o)}function p(e,t,o){const n=m||(m=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const o=e.target;t.unobserve(o);const n=u.get(o);if(n){u.delete(o);const{ctor:e,props:t}=n;f(o,e,t)}}}))}),{root:null,rootMargin:"100px"}),m);u.set(e,{ctor:t,props:o}),n.observe(e)}const u=new Map;let m;function h(e){return"IntersectionObserver"in globalThis&&e.getAttribute(a)===d}function b(e,t){return s(e,{is:t})}function g(e){return e.replace(/\/v\/[a-zA-Z0-9-_.]+$/,"").replace("/","-").replace(/([A-Z])/g,(e=>`-${e.toLowerCase()}`))}const w=/-([a-z])/g;function v(e){return e.replace(w,(e=>e[1].toUpperCase()))}function y(r,s={}){void 0!==globalThis.customElements&&void 0!==globalThis.document?(n({id:t}),(async()=>{let e=0;const t=globalThis.document;for(const[c,a]of r){await l();const r=++e,d=g(c);if(!t.body.querySelector(d)){n({id:o,specifier:c,specifierIndex:r});const e=b(d,a),s=t.querySelector("[lwr-root]");s?s.appendChild(e):t.body.appendChild(e),i({id:o,specifier:c,specifierIndex:r,metadata:{renderMode:"spa"}});continue}const u=t.querySelectorAll(d);for(const e of u){n({id:o,specifier:c,specifierIndex:r});const t=e.dataset.lwrPropsId;if(t){h(e)?p(e,a,s[t]||{}):f(e,a,s[t]||{}),i({id:o,specifier:c,specifierIndex:r,metadata:{renderMode:"ssr"}});continue}const l=b(d,a);for(const{name:t,value:o}of e.attributes){l.setAttribute(t,o);const e=v(t);e in l&&(l[e]=o)}for(;e.childNodes.length>0;)l.appendChild(e.childNodes[0]);const u=e.parentElement;u&&u.replaceChild(l,e),i({id:o,specifier:c,specifierIndex:r,metadata:{renderMode:"csr"}})}}})(),i({id:t}),n({id:e})):n({id:e})}export{a as HYDRATE_DIRECTIVE,d as HYDRATE_VISIBLE_VALUE,v as getPropFromAttrName,y as init,g as toKebabCase};
//# sourceMappingURL=init.js.map
