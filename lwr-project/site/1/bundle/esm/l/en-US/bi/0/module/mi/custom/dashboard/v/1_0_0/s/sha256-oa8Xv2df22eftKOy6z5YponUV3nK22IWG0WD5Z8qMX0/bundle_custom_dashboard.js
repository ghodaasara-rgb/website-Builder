import{parseFragment as h,registerTemplate as x,freezeTemplate as $,registerDecorators as S,registerComponent as k,LightningElement as _}from"/1/bundle/esm/l/en-US/bi/0/module/mi/lwc%2Fv%2F8_28_0/s/sha256-YEjxo0QDCp_Ri6v5gTkCFurICNw6jRY4sdZ3D70_fxc/bundle_lwc.js";function Y(a,t,s){var e=a?"["+a+"]":"",r=a?"["+a+"-host]":"",i=a?"-"+a:"";return[t?":host {":r+" {","--primary-600: #4f46e5;--primary-700: #4338ca;--primary-50: #eef2ff;--gray-50: #f9fafb;--gray-100: #f3f4f6;--gray-200: #e5e7eb;--gray-300: #d1d5db;--gray-700: #374151;--gray-900: #111827;--success-600: #059669;--success-50: #d1fae5;--warning-600: #d97706;--warning-50: #fef3c7;--danger-600: #dc2626;--border-radius: 8px;--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);}.dashboard-container",e," {font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;min-height: 100vh;background: var(--gray-50);padding: 24px;}.dashboard-header",e," {display: flex;justify-content: space-between;align-items: center;margin-bottom: 32px;}.header-content",e," {flex: 1;}.dashboard-title",e," {font-size: 32px;font-weight: 700;color: var(--gray-900);margin: 0 0 8px 0;}.dashboard-subtitle",e," {font-size: 16px;color: var(--gray-700);margin: 0;}.btn",e," {display: inline-flex;align-items: center;gap: 8px;padding: 10px 20px;border-radius: var(--border-radius);font-size: 14px;font-weight: 600;cursor: pointer;transition: all 0.2s;border: none;font-family: inherit;}.btn-primary",e," {background: var(--primary-600);color: white;}.btn-primary:hover",e," {background: var(--primary-700);box-shadow: var(--shadow-md);}.btn-secondary",e," {background: white;color: var(--gray-700);border: 1px solid var(--gray-300);}.btn-secondary:hover",e," {background: var(--gray-50);border-color: var(--gray-400);}.btn-danger",e," {background: var(--danger-600);color: white;}.btn-danger:hover",e," {background: #b91c1c;}.toolbar",e," {margin-bottom: 24px;}.loading-container",e," {display: flex;flex-direction: column;align-items: center;justify-content: center;padding: 80px 20px;color: var(--gray-700);}.spinner",e," {width: 48px;height: 48px;border: 4px solid var(--gray-200);border-top-color: var(--primary-600);border-radius: 50%;animation: spin",i," 0.8s linear infinite;margin-bottom: 16px;}@keyframes spin",i," {to {transform: rotate(360deg);}}.sites-grid",e," {display: grid;grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));gap: 24px;}.modal-overlay",e," {position: fixed;top: 0;left: 0;right: 0;bottom: 0;background: rgba(0, 0, 0, 0.5);display: flex;align-items: center;justify-content: center;z-index: 1000;padding: 20px;}.modal-content",e," {background: white;border-radius: var(--border-radius);box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);max-width: 500px;width: 100%;}.modal-header",e," {display: flex;justify-content: space-between;align-items: center;padding: 20px 24px;border-bottom: 1px solid var(--gray-200);}.modal-header",e," h2",e," {font-size: 20px;font-weight: 600;color: var(--gray-900);margin: 0;}.modal-close",e," {background: none;border: none;font-size: 28px;color: var(--gray-700);cursor: pointer;padding: 0;width: 32px;height: 32px;display: flex;align-items: center;justify-content: center;border-radius: 4px;}.modal-close:hover",e," {background: var(--gray-100);}.modal-body",e," {padding: 24px;}.modal-body",e," p",e," {margin: 0 0 12px 0;color: var(--gray-700);line-height: 1.6;}.warning-text",e," {color: var(--warning-600);font-size: 14px;font-weight: 500;}.modal-footer",e," {display: flex;justify-content: flex-end;gap: 12px;padding: 20px 24px;border-top: 1px solid var(--gray-200);}@media (max-width: 768px) {.dashboard-header",e," {flex-direction: column;align-items: flex-start;gap: 16px;}.dashboard-title",e," {font-size: 24px;}.sites-grid",e," {grid-template-columns: 1fr;}}@media (min-width: 1440px) {.sites-grid",e," {grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));}}.toolbar",e," {display: flex;justify-content: space-between;align-items: center;gap: 16px;margin-bottom: 24px;}.view-toggle",e," {display: flex;background: white;padding: 4px;border-radius: var(--border-radius);border: 1px solid var(--gray-300);}.view-toggle",e," button",e," {background: none;border: none;padding: 8px;border-radius: 4px;cursor: pointer;color: var(--gray-700);display: flex;align-items: center;justify-content: center;}.view-toggle",e," button:hover",e," {background: var(--gray-100);}.view-toggle",e," button.true",e," {background: var(--primary-50);color: var(--primary-600);}.sites-table-container",e," {background: white;border-radius: var(--border-radius);box-shadow: var(--shadow-sm);overflow: hidden;border: 1px solid var(--gray-200);}.sites-table",e," {width: 100%;border-collapse: collapse;}.sites-table",e," th",e," {background: var(--gray-50);padding: 16px 24px;text-align: left;font-size: 13px;font-weight: 600;color: var(--gray-700);text-transform: uppercase;letter-spacing: 0.5px;border-bottom: 1px solid var(--gray-200);}.sites-table",e," td",e," {padding: 16px 24px;border-bottom: 1px solid var(--gray-100);color: var(--gray-700);font-size: 14px;}.sites-table",e," tr:last-child",e," td",e," {border-bottom: none;}.sites-table",e," tr:hover",e," {background-color: var(--gray-50);}.site-name-cell",e," {display: flex;align-items: center;gap: 12px;cursor: pointer;}.site-icon",e," {width: 32px;height: 32px;background: var(--primary-50);color: var(--primary-600);border-radius: 6px;display: flex;align-items: center;justify-content: center;}.site-name",e," {font-weight: 600;color: var(--gray-900);}.status-badge",e," {padding: 4px 12px;border-radius: 12px;font-size: 12px;font-weight: 500;text-transform: capitalize;}.status-draft",e," {background: var(--gray-100);color: var(--gray-700);}.status-published",e," {background: var(--success-50);color: var(--success-600);}.isActions",e," {display: flex;gap: 8px;}.btn-icon",e," {background: none;border: none;padding: 6px;border-radius: 4px;cursor: pointer;color: var(--gray-700);transition: all 0.2s;}.btn-icon:hover",e," {background: var(--gray-100);color: var(--primary-600);}.btn-icon-delete:hover",e," {background: #fee2e2;color: var(--danger-600);}"].join("")}var C=[Y];function J(a,t,s){var e=a?"["+a+"]":"";return".search-bar"+e+" {display: flex;gap: 16px;align-items: center;flex-wrap: wrap;}.search-input-wrapper"+e+" {flex: 1;min-width: 300px;position: relative;}.search-icon"+e+" {position: absolute;left: 12px;top: 50%;transform: translateY(-50%);pointer-events: none;}.search-input"+e+" {width: 100%;padding: 10px 12px 10px 40px;border: 1px solid #d1d5db;border-radius: 8px;font-size: 14px;font-family: inherit;transition: all 0.2s;}.search-input:focus"+e+" {outline: none;border-color: #4f46e5;box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);}.filter-buttons"+e+" {display: flex;gap: 8px;background: #f3f4f6;padding: 4px;border-radius: 8px;}.filter-button"+e+" {padding: 8px 16px;border: none;background: transparent;border-radius: 6px;font-size: 14px;font-weight: 500;color: #6b7280;cursor: pointer;transition: all 0.2s;font-family: inherit;}.filter-button:hover"+e+" {color: #374151;}.filter-button.active"+e+" {background: white;color: #4f46e5;box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);}@media (max-width: 640px) {.search-bar"+e+" {flex-direction: column;align-items: stretch;}.search-input-wrapper"+e+" {min-width: 100%;}.filter-buttons"+e+" {width: 100%;justify-content: stretch;}.filter-button"+e+" {flex: 1;}}"}var M=[J];const K=h`<svg class="search-icon${0}" width="20" height="20" viewBox="0 0 20 20" fill="none"${2}><path d="M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16ZM17.5 17.5l-4-4" stroke="#6b7280" stroke-width="1.5" stroke-linecap="round"${3}/></svg>`,W=h`<div class="filter-buttons${0}"${2}><button${"c1"}${2}>All</button><button${"c3"}${2}>Draft</button><button${"c5"}${2}>Published</button></div>`,X={classMap:{"search-bar":!0},key:0},ee={classMap:{"search-input-wrapper":!0},key:1},te={"search-input":!0},ae={type:"text",placeholder:"Search sites by name..."};function g(a,t,s,e){const{st:r,b:i,h:o,ncls:n,sp:u}=a,{_m0:c,_m1:v,_m2:p,_m3:y}=e;return[o("div",X,[o("div",ee,[r(K,3),o("input",{classMap:te,attrs:ae,props:{value:t.searchValue},key:4,on:c||(e._m0={input:i(t.handleSearchInput)})})]),r(W,6,[u(1,{on:v||(e._m1={click:i(t.handleFilterAll)}),className:n(t.allButtonClass)},null),u(3,{on:p||(e._m2={click:i(t.handleFilterDraft)}),className:n(t.draftButtonClass)},null),u(5,{on:y||(e._m3={click:i(t.handleFilterPublished)}),className:n(t.publishedButtonClass)},null)])])]}var re=x(g);g.stylesheets=[],g.stylesheetToken="lwc-3jjlqquhajs",g.legacyStylesheetToken="custom-searchbar_searchbar",M&&g.stylesheets.push.apply(g.stylesheets,M),$(g);class E extends _{constructor(...t){super(...t);this.searchValue="",this.activeFilter="all"}handleSearchInput(t){this.searchValue=t.target.value,clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.dispatchEvent(new CustomEvent("search",{detail:{query:this.searchValue}}))},300)}handleFilterAll(){this.activeFilter="all",this.dispatchEvent(new CustomEvent("filter",{detail:{status:"all"}}))}handleFilterDraft(){this.activeFilter="draft",this.dispatchEvent(new CustomEvent("filter",{detail:{status:"draft"}}))}handleFilterPublished(){this.activeFilter="published",this.dispatchEvent(new CustomEvent("filter",{detail:{status:"published"}}))}get allButtonClass(){return`filter-button ${this.activeFilter==="all"?"active":""}`}get draftButtonClass(){return`filter-button ${this.activeFilter==="draft"?"active":""}`}get publishedButtonClass(){return`filter-button ${this.activeFilter==="published"?"active":""}`}disconnectedCallback(){clearTimeout(this.searchTimeout)}}S(E,{track:{searchValue:1,activeFilter:1}});const se=k(E,{tmpl:re,sel:"custom-searchbar",apiVersion:66});function ie(a,t,s){var e=a?"["+a+"]":"";return".empty-state"+e+" {text-align: center;padding: 80px 20px;}.empty-icon"+e+" {margin-bottom: 24px;}.empty-title"+e+" {font-size: 24px;font-weight: 600;color: #111827;margin: 0 0 12px 0;}.empty-description"+e+" {font-size: 16px;color: #6b7280;margin: 0 0 32px 0;max-width: 400px;margin-left: auto;margin-right: auto;}.btn"+e+" {display: inline-flex;align-items: center;gap: 8px;padding: 12px 24px;border-radius: 8px;font-size: 14px;font-weight: 600;cursor: pointer;transition: all 0.2s;border: none;font-family: inherit;}.btn-primary"+e+" {background: #4f46e5;color: white;}.btn-primary:hover"+e+" {background: #4338ca;box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);}"}var D=[ie];const oe=h`<div class="empty-state${0}"${2}><div class="empty-icon${0}"${2}><svg width="64" height="64" viewBox="0 0 64 64" fill="none"${3}><path d="M32 58.667C46.728 58.667 58.667 46.728 58.667 32S46.728 5.333 32 5.333 5.333 17.272 5.333 32 17.272 58.667 32 58.667Z" fill="#eef2ff" stroke="#4f46e5" stroke-width="2"${3}/><path d="M32 24v16M24 32h16" stroke="#4f46e5" stroke-width="2.5" stroke-linecap="round"${3}/></svg></div><h2 class="empty-title${0}"${2}>No Sites Yet</h2><p class="empty-description${0}"${2}>Create your first website to get started with SiteCentral</p><button class="btn btn-primary${0}"${2}><svg width="16" height="16" viewBox="0 0 16 16" fill="none"${3}><path d="M8 3.33334V12.6667M3.33334 8H12.6667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"${3}/></svg>Create Your First Site</button></div>`;function b(a,t,s,e){const{b:r,sp:i,st:o}=a,{_m0:n}=e;return[o(oe,1,[i(9,{on:n||(e._m0={click:r(t.handleCreate)})},null)])]}var ne=x(b);b.stylesheets=[],b.stylesheetToken="lwc-7tpbsm2kfla",b.legacyStylesheetToken="custom-emptystate_emptystate",D&&b.stylesheets.push.apply(b.stylesheets,D),$(b);class le extends _{handleCreate(){this.dispatchEvent(new CustomEvent("create"))}}const de=k(le,{tmpl:ne,sel:"custom-emptystate",apiVersion:66});function ce(a,t,s){var e=a?"["+a+"]":"";return".site-card"+e+" {background: white;border-radius: 8px;padding: 24px;border: 1px solid #e5e7eb;transition: all 0.2s;}.site-card:hover"+e+" {box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);border-color: #d1d5db;}.site-card-header"+e+" {display: flex;justify-content: space-between;align-items: flex-start;margin-bottom: 16px;gap: 12px;}.site-name"+e+" {font-size: 18px;font-weight: 600;color: #111827;margin: 0;flex: 1;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}.status-badge"+e+" {display: inline-flex;align-items: center;padding: 4px 12px;border-radius: 12px;font-size: 12px;font-weight: 600;flex-shrink: 0;}.status-draft"+e+" {background: #fef3c7;color: #92400e;}.status-published"+e+" {background: #d1fae5;color: #065f46;}.site-meta"+e+" {display: flex;gap: 20px;margin-bottom: 20px;}.meta-item"+e+" {display: flex;align-items: center;gap: 6px;font-size: 14px;color: #6b7280;}.meta-item"+e+" svg"+e+" {color: #9ca3af;}.site-actions"+e+" {display: flex;gap: 8px;}.btn"+e+" {display: inline-flex;align-items: center;justify-content: center;gap: 6px;padding: 8px 12px;border-radius: 6px;font-size: 13px;font-weight: 600;cursor: pointer;transition: all 0.2s;border: none;font-family: inherit;flex: 1;}.btn-primary"+e+" {background: #4f46e5;color: white;}.btn-primary:hover"+e+" {background: #4338ca;}.btn-secondary"+e+" {background: white;color: #374151;border: 1px solid #d1d5db;}.btn-secondary:hover"+e+" {background: #f9fafb;border-color: #9ca3af;}.btn-icon"+e+" {flex: 0 0 auto;width: 36px;padding: 8px;}.btn-danger"+e+" {border: 1px solid #fecaca;color: #dc2626;}.btn-danger:hover"+e+" {background: #fef2f2;border-color: #dc2626;}"}var T=[ce];const he=h`<div class="site-card${0}"${2}><div class="site-card-header${0}"${2}><h3 class="site-name${0}"${2}>${"t3"}</h3><span${"c4"}${2}>${"t5"}</span></div><div class="site-meta${0}"${2}><div class="meta-item${0}"${2}><svg width="16" height="16" viewBox="0 0 16 16" fill="none"${3}><path d="M8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12Z" stroke="currentColor" stroke-width="1.5"${3}/><path d="M8 5v3l2 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"${3}/></svg><span${3}>${"t12"}</span></div><div class="meta-item${0}"${2}><svg width="16" height="16" viewBox="0 0 16 16" fill="none"${3}><path d="M2 4.667C2 3.747 2.746 3 3.667 3h8.666C13.253 3 14 3.746 14 4.667v6.666c0 .92-.746 1.667-1.667 1.667H3.667A1.667 1.667 0 0 1 2 11.333V4.667Z" stroke="currentColor" stroke-width="1.5"${3}/><path d="M6 3v10M2 8h12" stroke="currentColor" stroke-width="1.5"${3}/></svg><span${3}>${"t18"}</span></div></div><div class="site-actions${0}"${2}><button class="btn btn-primary${0}"${2}><svg width="16" height="16" viewBox="0 0 16 16" fill="none"${3}><path d="M11.333 2H4.667C3.747 2 3 2.746 3 3.667v8.666C3 13.253 3.746 14 4.667 14h6.666c.92 0 1.667-.746 1.667-1.667V3.667C13 2.747 12.254 2 11.333 2Z" stroke="currentColor" stroke-width="1.5"${3}/><path d="M6 5.333h4M6 8h4M6 10.667h2.667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"${3}/></svg>Open Builder</button><button class="btn btn-secondary${0}"${2}><svg width="16" height="16" viewBox="0 0 16 16" fill="none"${3}><path d="M8 5.333c-2.667 0-4.88 1.827-5.64 4.334.76 2.506 2.973 4.333 5.64 4.333s4.88-1.827 5.64-4.333C12.88 7.16 10.667 5.333 8 5.333Z" stroke="currentColor" stroke-width="1.5"${3}/><circle cx="8" cy="9.667" r="1.667" stroke="currentColor" stroke-width="1.5"${3}/></svg>Preview</button><button class="btn btn-icon btn-danger${0}" title="Delete site"${2}><svg width="16" height="16" viewBox="0 0 16 16" fill="none"${3}><path d="M3.333 5.333h9.334M6.667 7.333v4M9.333 7.333v4M5.333 5.333V3.667a1 1 0 0 1 1-1h3.334a1 1 0 0 1 1 1v1.666m-6.667 0v7.667a1 1 0 0 0 1 1h5.333a1 1 0 0 0 1-1V5.333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"${3}/></svg></button></div></div>`;function f(a,t,s,e){const{d:r,ncls:i,b:o,sp:n,st:u}=a,{_m0:c,_m1:v,_m2:p}=e;return[u(he,1,[n(3,null,r(t.site.name)),n(4,{className:i(t.statusBadgeClass)},null),n(5,null,r(t.statusLabel)),n(12,null,r(t.lastModified)),n(18,null,r(t.pageCountText)),n(20,{on:c||(e._m0={click:o(t.handleOpen)})},null),n(25,{on:v||(e._m1={click:o(t.handlePreview)})},null),n(30,{on:p||(e._m2={click:o(t.handleDelete)})},null)])]}var pe=x(f);f.stylesheets=[],f.stylesheetToken="lwc-2q7dn1madp2",f.legacyStylesheetToken="custom-sitecard_sitecard",T&&f.stylesheets.push.apply(f.stylesheets,T),$(f);class F extends _{constructor(...t){super(...t);this.site=void 0}get statusBadgeClass(){return`status-badge status-${this.site?.status||"draft"}`}get statusLabel(){const t=this.site?.status||"draft";return t.charAt(0).toUpperCase()+t.slice(1)}get lastModified(){if(!this.site?.updated_at&&!this.site?.created_at)return"Never";const t=new Date(this.site.updated_at||this.site.created_at),e=new Date-t,r=Math.floor(e/6e4),i=Math.floor(e/36e5),o=Math.floor(e/864e5);return r<1?"Just now":r<60?`${r} minute${r>1?"s":""} ago`:i<24?`${i} hour${i>1?"s":""} ago`:o<7?`${o} day${o>1?"s":""} ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}get pageCountText(){const t=this.site?.pageCount||0;return`${t} page${t!==1?"s":""}`}handleOpen(){this.dispatchEvent(new CustomEvent("open",{detail:{siteId:this.site.id}}))}handlePreview(){this.dispatchEvent(new CustomEvent("preview",{detail:{siteId:this.site.id}}))}handleDelete(){this.dispatchEvent(new CustomEvent("delete",{detail:{siteId:this.site.id}}))}}S(F,{publicProps:{site:{config:0}}});const ue=k(F,{tmpl:pe,sel:"custom-sitecard",apiVersion:66}),ge=h`<header class="dashboard-header${0}"${2}><div class="header-content${0}"${2}><h1 class="dashboard-title${0}"${2}>SiteCentral</h1><p class="dashboard-subtitle${0}"${2}>Manage all your websites in one place</p></div><button class="btn btn-primary${0}"${2}><svg width="16" height="16" viewBox="0 0 16 16" fill="none"${3}><path d="M8 3.33334V12.6667M3.33334 8H12.6667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"${3}/></svg>Create New Site</button></header>`,be=h`<div class="view-toggle${0}"${2}><button${"c1"} data-mode="grid" title="Grid View"${2}><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"${3}><path d="M3 3h7v7H3zM14 3h7v7h-7zM14 14h7v7h-7zM3 14h7v7H3z"${3}/></svg></button><button${"c4"} data-mode="table" title="Table View"${2}><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"${3}><path d="M3 6h18M3 12h18M3 18h18"${3}/></svg></button></div>`,fe=h`<div class="loading-container${0}"${2}><div class="spinner${0}"${2}></div><p${3}>Loading your sites...</p></div>`,me=h`<thead${3}><tr${3}><th${3}>Name</th><th${3}>Info</th><th${3}>Status</th><th${3}>Last Modified</th><th${3}>Actions</th></tr></thead>`,ve=h`<tr${3}><td${3}><div class="site-name-cell${0}"${"a2:data-id"}${2}><div class="site-icon${0}"${2}><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"${3}><path d="M12 2L2 19h20L12 2z"${3}/></svg></div><span class="site-name${0}"${2}>${"t7"}</span></div></td><td${3}><div class="site-info${0}"${2}><span class="info-label${0}"${2}>Pages:</span>${"t12"}</div></td><td${3}><span class="status-badge status-draft${0}"${2}>${"t15"}</span></td><td${3}><span class="date-text${0}"${2}>${"t18"}</span></td><td${3}><div class="isActions${0}"${2}><button class="btn-icon${0}"${"a21:data-id"} title="Edit"${2}><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"${3}><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"${3}/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"${3}/></svg></button><button class="btn-icon${0}"${"a25:data-id"} title="Preview"${2}><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"${3}><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"${3}/><circle cx="12" cy="12" r="3"${3}/></svg></button><button class="btn-icon btn-icon-delete${0}"${"a29:data-id"} title="Delete"${2}><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"${3}><polyline points="3 6 5 6 21 6"${3}/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"${3}/></svg></button></div></td></tr>`,we=h`<div class="modal-overlay${0}"${2}><div class="modal-content${0}"${2}><div class="modal-header${0}"${2}><h2${3}>Delete Site</h2><button class="modal-close${0}"${2}>Ã—</button></div><div class="modal-body${0}"${2}><p${3}>Are you sure you want to delete &quot;<strong${3}>${"t11"}</strong>&quot;?</p><p class="warning-text${0}"${2}>This action cannot be undone. All pages and components will be permanently deleted.</p></div><div class="modal-footer${0}"${2}><button class="btn btn-secondary${0}"${2}>Cancel</button><button class="btn btn-danger${0}"${2}>Delete Site</button></div></div></div>`,ye={classMap:{"dashboard-container":!0},key:0},xe={classMap:{toolbar:!0},key:3},$e={classMap:{"sites-table-container":!0},key:10},ke={classMap:{"sites-table":!0},key:11},_e={key:14},Se={classMap:{"sites-grid":!0},key:17};function m(a,t,s,e){const{b:r,sp:i,st:o,c:n,ncls:u,h:c,k:v,d:p,i:y}=a,{_m0:z,_m1:V,_m2:j,_m3:L,_m4:A,_m5:N,_m6:I,_m7:H,_m8:O,_m9:R,_m10:Pe,_m11:q,_m12:U,_m13:Z,_m14:Q,_m15:G}=e;return[c("div",ye,[o(ge,2,[i(6,{on:z||(e._m0={click:r(t.handleCreateSite)})},null)]),c("div",xe,[n("custom-searchbar",se,{key:4,on:V||(e._m1={search:r(t.handleSearch),filter:r(t.handleFilter)})}),o(be,6,[i(1,{on:j||(e._m2={click:r(t.handleViewChange)}),className:u(t.isGridView)},null),i(4,{on:L||(e._m3={click:r(t.handleViewChange)}),className:u(t.isTableView)},null)])]),t.isLoading?o(fe,8):null,t.showEmptyState?n("custom-emptystate",de,{key:9,on:A||(e._m4={create:r(t.handleCreateSite)})}):null,t.shouldRenderTable?c("div",$e,[c("table",ke,[o(me,13),c("tbody",_e,y(t.filteredSites,function(l){return o(ve,v(16,l.id),[i(2,{on:N||(e._m5={click:r(t.handleOpenBuilder)}),attrs:{"data-id":l.id}},null),i(7,null,p(l.name)),i(12,null," "+p(l.pageCount)),i(15,null,p(l.status)),i(18,null,p(l.updated_at)),i(21,{on:I||(e._m6={click:r(t.handleOpenBuilder)}),attrs:{"data-id":l.id}},null),i(25,{on:H||(e._m7={click:r(t.handlePreview)}),attrs:{"data-id":l.id}},null),i(29,{on:O||(e._m8={click:r(t.handleDelete)}),attrs:{"data-id":l.id}},null)])}))])]):null,t.isGridView?c("div",Se,y(t.filteredSites,function(l){return n("custom-sitecard",ue,{props:{site:l},key:v(18,l.id),on:R||(e._m9={open:r(t.handleOpenBuilder),preview:r(t.handlePreview),delete:r(t.handleDelete)})})})):null,t.showDeleteModal?o(we,20,[i(0,{on:q||(e._m11={click:r(t.handleCancelDelete)})},null),i(1,{on:U||(e._m12={click:r(t.stopPropagation)})},null),i(5,{on:Z||(e._m13={click:r(t.handleCancelDelete)})},null),i(11,null,p(t.siteToDelete.name)),i(16,{on:Q||(e._m14={click:r(t.handleCancelDelete)})},null),i(18,{on:G||(e._m15={click:r(t.handleConfirmDelete)})},null)]):null])]}var Ce=x(m);m.stylesheets=[],m.stylesheetToken="lwc-5ailimivs0f",m.legacyStylesheetToken="custom-dashboard_dashboard",C&&m.stylesheets.push.apply(m.stylesheets,C),$(m);const d=globalThis?.LWR?.env||{};d&&(d.SSR==="true"||d.SSR),d&&d.basePath,d&&d.locale,d&&d.assetBasePath,d&&d.uiBasePath;const Me=import.meta.env&&import.meta.env.API_URL||process.env.API_URL||"https://backend-six-xi-72.vercel.app",w=`${Me}/api`;async function Ee(){try{const a=await fetch(`${w}/sites`);if(!a.ok)throw new Error("Failed to load sites");return await a.json()}catch(a){throw console.error("\u274C Error loading sites:",a),a}}async function De(a){try{const t=await fetch(`${w}/sites`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a})});if(!t.ok)throw new Error("Failed to create site");return await t.json()}catch(t){throw console.error("\u274C Error creating site:",t),t}}async function Te(a){try{const t=await fetch(`${w}/sites/${a}`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete site");return await t.json()}catch(t){throw console.error("\u274C Error deleting site:",t),t}}async function B(a){try{const t=await fetch(`${w}/sites/${a}/pages`);if(!t.ok)throw new Error("Failed to load pages");return await t.json()}catch(t){console.error("\u274C Error loading pages:",t)}}async function Fe(a,t,s){try{const e=await fetch(`${w}/sites/${a}/pages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,slug:s})});if(!e.ok)throw new Error("Failed to create page");return await e.json()}catch(e){throw console.error("\u274C Error creating page:",e),e}}class P extends _{constructor(...t){super(...t);this.sites=[],this.filteredSites=[],this.isLoading=!0,this.searchQuery="",this.filterStatus="all",this.viewMode="table",this.showDeleteModal=!1,this.siteToDelete=null}connectedCallback(){this.loadSites()}get isGridView(){return this.viewMode==="grid"}get isTableView(){return this.viewMode==="table"}get shouldRenderTable(){return this.viewMode==="table"&&this.sites.length>0&&!this.isLoading}handleViewChange(t){this.viewMode=t.currentTarget.dataset.mode}async loadSites(){this.isLoading=!0;try{this.sites=await Ee(),this.applyFilters()}catch(t){console.error("Error loading sites:",t),this.sites=[],this.filteredSites=[]}finally{this.isLoading=!1}}applyFilters(){let t=[...this.sites];if(this.searchQuery){const s=this.searchQuery.toLowerCase();t=t.filter(e=>e.name.toLowerCase().includes(s)||e.domain&&e.domain.toLowerCase().includes(s))}this.filterStatus&&this.filterStatus!=="all"&&(t=t.filter(s=>s.status===this.filterStatus)),this.filteredSites=t}handleSearch(t){this.searchQuery=t.detail.query,this.applyFilters()}handleFilter(t){this.filterStatus=t.detail.status,this.applyFilters()}handleCreateSite(){const t=prompt("Enter new site name:");!t||this.createSite(t)}async createSite(t){try{const s=await De(t);await this.loadSites(),s.id&&this.navigateToBuilder(s.id)}catch(s){console.error("Error creating site:",s),alert("Failed to create site. Please try again.")}}getSiteIdFromEvent(t){return t.detail&&t.detail.siteId?t.detail.siteId:t.currentTarget.dataset.id||t.target.closest("[data-id]")?.dataset.id}handleOpenBuilder(t){const s=this.getSiteIdFromEvent(t);s&&this.navigateToBuilder(s)}async navigateToBuilder(t){try{const s=await B(t);if(s&&s.length>0)window.location.href=`/builder?site=${t}&page=${s[0].id}`;else{const e=await Fe(t,"Home","/");window.location.href=`/builder?site=${t}&page=${e.id}`}}catch(s){console.error("Error navigating to builder:",s),alert("Failed to open builder. Please try again.")}}async handlePreview(t){const s=this.getSiteIdFromEvent(t);if(!!s)try{const e=await B(s);e&&e.length>0?window.open(`/preview/${e[0].id}`,"_blank"):alert("No pages found for this site.")}catch(e){console.error("Error opening preview:",e),alert("Failed to open preview. Please try again.")}}handleDelete(t){const s=this.getSiteIdFromEvent(t),e=this.sites.find(r=>r.id===s);e&&(this.siteToDelete=e,this.showDeleteModal=!0)}handleCancelDelete(){this.showDeleteModal=!1,this.siteToDelete=null}async handleConfirmDelete(){if(!!this.siteToDelete)try{await Te(this.siteToDelete.id),await this.loadSites(),this.showDeleteModal=!1,this.siteToDelete=null}catch(t){console.error("Error deleting site:",t),alert("Failed to delete site. Please try again.")}}stopPropagation(t){t.stopPropagation()}get showEmptyState(){return!this.isLoading&&this.sites.length===0}get showSitesGrid(){return!this.isLoading&&this.filteredSites.length>0}}S(P,{track:{sites:1,filteredSites:1,isLoading:1,searchQuery:1,filterStatus:1,viewMode:1,showDeleteModal:1,siteToDelete:1}});const Be=k(P,{tmpl:Ce,sel:"custom-dashboard",apiVersion:66});export{Be as default};
