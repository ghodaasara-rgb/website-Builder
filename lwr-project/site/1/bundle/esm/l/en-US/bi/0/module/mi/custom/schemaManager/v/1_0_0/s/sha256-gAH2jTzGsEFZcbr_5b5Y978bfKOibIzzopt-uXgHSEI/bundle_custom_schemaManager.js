import{parseFragment as n,registerTemplate as O,freezeTemplate as F,registerDecorators as M,registerComponent as P,LightningElement as L}from"/1/bundle/esm/l/en-US/bi/0/module/mi/lwc%2Fv%2F8_28_0/s/sha256-YEjxo0QDCp_Ri6v5gTkCFurICNw6jRY4sdZ3D70_fxc/bundle_lwc.js";function H(c,e,l){var t=c?"["+c+"]":"";return".container"+t+' {padding: 20px;max-width: 1200px;margin: 0 auto;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;}.header'+t+" {display: flex;justify-content: space-between;align-items: center;margin-bottom: 30px;border-bottom: 1px solid #eee;padding-bottom: 20px;}.grid"+t+" {display: grid;grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));gap: 20px;}.card"+t+" {background: #fff;border: 1px solid #ddd;border-radius: 8px;padding: 20px;cursor: pointer;transition: box-shadow 0.2s;}.card:hover"+t+" {box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);}.btn-primary"+t+" {background: #0070d2;color: white;border: none;padding: 10px 20px;border-radius: 4px;cursor: pointer;}.btn-secondary"+t+" {background: #f4f6f9;color: #333;border: 1px solid #ddd;padding: 10px 20px;border-radius: 4px;cursor: pointer;}.content-split"+t+" {display: grid;grid-template-columns: 300px 1fr;gap: 30px;}.field-item"+t+" {padding: 10px;border-bottom: 1px solid #eee;display: flex;justify-content: space-between;}.badge"+t+" {background: #eee;padding: 2px 6px;border-radius: 4px;font-size: 0.8rem;}.modal"+t+" {background: #fff;border: 1px solid #ddd;box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);border-radius: 8px;overflow: hidden;}.form-preview"+t+" {background: #f8f9fa;padding: 20px;border-radius: 8px;}.debug-values"+t+" {background: #333;color: #0f0;padding: 10px;margin-top: 20px;border-radius: 4px;font-family: monospace;}"}var N=[H];const f=globalThis?.LWR?.env||{};f&&(f.SSR==="true"||f.SSR),f&&f.basePath,f&&f.locale,f&&f.assetBasePath,f&&f.uiBasePath;function U(c,e,l){var t=c?"["+c+"]":"";return".wizard-container"+t+" {padding: 20px;background: #fff;border-radius: 8px;max-width: 600px;margin: 0 auto;}.step-header"+t+" {margin-bottom: 20px;text-align: center;}.step-header"+t+" h2"+t+" {margin: 0;font-size: 1.5rem;color: #333;}.type-grid"+t+" {display: grid;grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));gap: 16px;}.type-card"+t+" {border: 1px solid #e0e0e0;border-radius: 8px;padding: 16px;cursor: pointer;transition: all 0.2s;text-align: center;}.type-card:hover"+t+" {border-color: #0070d2;box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);}.type-info"+t+" h3"+t+" {margin: 10px 0 5px;font-size: 1rem;}.type-info"+t+" p"+t+" {font-size: 0.8rem;color: #666;margin: 0;}.form-container"+t+" {max-width: 400px;margin: 0 auto;}.form-group"+t+" {margin-bottom: 16px;}.form-group"+t+" label"+t+" {display: block;margin-bottom: 8px;font-weight: 500;}.input-control"+t+" {width: 100%;padding: 8px 12px;border: 1px solid #dcdcdc;border-radius: 4px;font-size: 1rem;}.actions"+t+" {display: flex;justify-content: flex-end;gap: 12px;margin-top: 24px;border-top: 1px solid #eee;padding-top: 16px;}.btn-primary"+t+",.btn-secondary"+t+" {padding: 8px 16px;border-radius: 4px;cursor: pointer;font-weight: 600;border: none;}.btn-primary"+t+" {background: #0070d2;color: white;}.btn-secondary"+t+" {background: #f3f3f3;color: #333;}.error-banner"+t+" {background: #fedada;color: #c23934;padding: 10px;border-radius: 4px;margin-bottom: 16px;text-align: center;}"}var V=[U];const K=n`<div class="error-banner${0}"${2}>${"t1"}</div>`,X=n`<div class="step-header${0}"${2}><h2${3}>Choose Field Type</h2><p${3}>Select the data type for your new field.</p></div>`,J=n`<div class="type-card${0}"${"a0:data-type"}${2}><div class="icon-container${0}"${2}><span class="type-icon${0}"${2}></span></div><div class="type-info${0}"${2}><h3${3}>${"t5"}</h3><p${3}>${"t7"}</p></div></div>`,Y=n`<div class="step-header${0}"${2}><h2${3}>${"t2"}</h2></div>`,Q=n`<label${3}>Field Label</label>`,Z=n`<label${3}>${"t1"}</label>`,G=n`<textarea${"a0:data-name"} class="input-control${0}" rows="3"${2}>${"t1"}</textarea>`,ee=n`<div class="actions${0}"${2}><button class="btn-secondary${0}"${2}>Back</button><button class="btn-primary${0}"${2}>Next</button></div>`,te=n`<div class="step-header${0}"${2}><h2${3}>Review &amp; Save</h2></div>`,ae=n`<div class="summary-container${0}"${2}><p${3}><strong${3}>Type:</strong>${"t4"}</p><p${3}><strong${3}>Label:</strong>${"t8"}</p></div>`,se=n`<div class="actions${0}"${2}><button class="btn-secondary${0}"${2}>Back</button><button class="btn-primary${0}"${2}>Save Field</button></div>`,ie={classMap:{"wizard-container":!0},key:0},le={classMap:{"type-grid":!0},key:5},ne={classMap:{"form-container":!0},key:10},re={classMap:{"form-group":!0},key:11},I={"input-control":!0},oe={type:"text",placeholder:"e.g. Status"},de={"form-group":!0};function b(c,e,l,t){const{d:s,sp:i,st:a,k:r,b:o,i:u,h:p,f:_}=c,{_m0:w,_m1:$,_m2:v,_m3:j,_m4:x,_m5:T,_m6:C,_m7:k,_m8:m,_m9:E,_m10:z}=t;return[p("div",ie,[e.error?a(K,2,[i(1,null,s(e.error))]):null,e.isStep1?a(X,4):null,e.isStep1?p("div",le,u(e.fieldTypes,function(d){return a(J,r(7,d.type),[i(0,{on:$||(t._m1={click:o(e.handleSelectType)}),attrs:{"data-type":d.type}},null),i(5,null,s(d.label)),i(7,null,s(d.description))])})):null,e.isStep2?a(Y,9,[i(2,null,"Configure "+s(e.selectedTypeLabel))]):null,e.isStep2?p("div",ne,_([p("div",re,[a(Q,13),p("input",{classMap:I,attrs:oe,props:{value:e.fieldLabel},key:14,on:v||(t._m2={input:o(e.handleLabelChange)})})]),u(e.dynamicConfigFields,function(d){return p("div",{classMap:de,key:r(15,d.name)},[a(Z,17,[i(1,null,s(d.label))]),d.isTextarea?a(G,19,[i(0,{on:x||(t._m4={input:o(e.handleConfigChange)}),attrs:{"data-name":d.name}},null),i(1,null,s(d.value))]):null,d.isCheckbox?p("input",{attrs:{type:"checkbox","data-name":d.name},props:{checked:d.value},key:20,on:T||(t._m5={change:o(e.handleConfigChange)})}):null,d.isNumber?p("input",{classMap:I,attrs:{type:"number","data-name":d.name},props:{value:d.value},key:21,on:C||(t._m6={input:o(e.handleConfigChange)})}):null])})])):null,e.isStep2?a(ee,23,[i(1,{on:k||(t._m7={click:o(e.handleBack)})},null),i(3,{on:m||(t._m8={click:o(e.handleNext)})},null)]):null,e.isStep3?a(te,25):null,e.isStep3?a(ae,27,[i(4,null," "+s(e.selectedTypeLabel)),i(8,null," "+s(e.fieldLabel))]):null,e.isStep3?a(se,29,[i(1,{on:E||(t._m9={click:o(e.handleBack)})},null),i(3,{on:z||(t._m10={click:o(e.handleSave)})},null)]):null])]}var ce=O(b);b.stylesheets=[],b.stylesheetToken="lwc-2t0ua9hvkmr",b.legacyStylesheetToken="custom-fieldWizard_fieldWizard",V&&b.stylesheets.push.apply(b.stylesheets,V),F(b);const B=[{label:"Text",type:"TEXT",icon:"utility:text",description:"Single line of text",config:[{name:"maxLength",label:"Max Length",type:"number",defaultValue:255}]},{label:"Number",type:"NUMBER",icon:"utility:number_input",description:"Numeric value with precision",config:[{name:"precision",label:"Decimal Places",type:"number",defaultValue:0}]},{label:"Picklist",type:"PICKLIST",icon:"utility:picklist_type",description:"Select from a list of options",config:[{name:"values",label:"Values (One per line)",type:"textarea",required:!0}]},{label:"Checkbox",type:"CHECKBOX",icon:"utility:check",description:"True or False toggle",config:[{name:"defaultValue",label:"Default Checked",type:"checkbox"}]},{label:"Date",type:"DATE",icon:"utility:date_input",description:"Date picker",config:[]},{label:"Email",type:"EMAIL",icon:"utility:email",description:"Email address validation",config:[]}];class D extends L{constructor(...e){super(...e);this.objectId=void 0,this.step=1,this.selectedType=null,this.configValues={},this.fieldLabel="",this.fieldApiName="",this.error=""}get fieldTypes(){return B}get isStep1(){return this.step===1}get isStep2(){return this.step===2}get isStep3(){return this.step===3}get selectedTypeLabel(){return this.selectedType?this.selectedType.label:""}get dynamicConfigFields(){return this.selectedType?this.selectedType.config.map(e=>({...e,isTextarea:e.type==="textarea",isCheckbox:e.type==="checkbox",isNumber:e.type==="number",value:this.configValues[e.name]||e.defaultValue||""})):[]}handleSelectType(e){const l=e.currentTarget.dataset.type;this.selectedType=B.find(t=>t.type===l),this.step=2,this.error=""}handleLabelChange(e){this.fieldLabel=e.target.value}handleConfigChange(e){const l=e.target.dataset.name,s=e.target.type==="checkbox"?e.target.checked:e.target.value;this.configValues={...this.configValues,[l]:s}}handleNext(){if(!this.fieldLabel){this.error="Label is required";return}this.step=3}handleBack(){this.step=this.step-1,this.error=""}async handleSave(){this.error="";try{const e={...this.configValues};this.selectedType.type==="PICKLIST"&&e.values&&typeof e.values=="string"&&(e.values=e.values.split(`
`).map(a=>a.trim()).filter(a=>a));const l={object_id:this.objectId,label:this.fieldLabel,data_type:this.selectedType.type,metadata:e},t=import.meta.env&&import.meta.env.API_URL||process.env.API_URL||"https://backend-six-xi-72.vercel.app",s=await fetch(`${t}/api/schema/fields`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!s.ok){const a=await s.text();try{const r=JSON.parse(a);throw new Error(r.error||a)}catch{throw new Error(a)}}const i=await s.json();console.log("Field created:",i),this.dispatchEvent(new CustomEvent("success",{detail:i})),this.step=1,this.selectedType=null,this.configValues={},this.fieldLabel=""}catch(e){this.error=e.message}}}M(D,{publicProps:{objectId:{config:0}},track:{step:1,selectedType:1,configValues:1,fieldLabel:1,fieldApiName:1,error:1}});const pe=P(D,{tmpl:ce,sel:"custom-field-wizard",apiVersion:66});function ue(c,e,l){var t=c?"["+c+"]":"";return".field-container"+t+" {margin-bottom: 1rem;}.field-label"+t+" {display: block;margin-bottom: 0.5rem;font-weight: 500;color: #3e3e3c;font-size: 0.875rem;}.required"+t+" {color: #ea001e;margin-left: 0.125rem;}.input-control"+t+" {width: 100%;padding: 0.5rem 0.75rem;font-size: 0.875rem;line-height: 1.5;color: #080707;background-color: #fff;background-clip: padding-box;border: 1px solid #dddbda;border-radius: 0.25rem;transition: border 0.1s linear, background-color 0.1s linear;}.input-control:focus"+t+" {outline: 0;border-color: #1589ee;box-shadow: 0 0 3px #0070d2;}.checkbox-wrapper"+t+" {display: flex;align-items: center;height: 2.25rem;}textarea.input-control"+t+" {resize: vertical;}"}var R=[ue];const he=n`<span class="required${0}"${2}>*</span>`,fe=n`<option value${3}>-- Select --</option>`,me=n`<option${"a0:value"}${"a0:selected"}${3}>${"t1"}</option>`,be=n`<textarea class="input-control${0}" rows="3"${"a0:required"}${2}>${"t1"}</textarea>`,ge={classMap:{"field-container":!0},key:0},ye={classMap:{"field-label":!0},key:1},S={"input-control":!0},_e={classMap:{"checkbox-wrapper":!0},key:6},ve={type:"checkbox"};function g(c,e,l,t){const{d:s,t:i,st:a,h:r,b:o,k:u,sp:p,i:_,f:w}=c,{_m0:$,_m1:v,_m2:j,_m3:x,_m4:T,_m5:C,_m6:k}=t;return[r("div",ge,[r("label",ye,[i(s(e.field.label)),e.field.is_required?a(he,3):null]),e.isText?r("input",{classMap:S,attrs:{type:"text",required:e.field.is_required?"":null},props:{value:e.value},key:4,on:$||(t._m0={input:o(e.handleChange)})}):null,e.isNumber?r("input",{classMap:S,attrs:{type:"number",step:e.step,required:e.field.is_required?"":null},props:{value:e.value},key:5,on:v||(t._m1={input:o(e.handleChange)})}):null,e.isCheckbox?r("div",_e,[r("input",{attrs:ve,props:{checked:e.value},key:7,on:j||(t._m2={change:o(e.handleChange)})})]):null,e.isDate?r("input",{classMap:S,attrs:{type:"date",required:e.field.is_required?"":null},props:{value:e.value},key:8,on:x||(t._m3={change:o(e.handleChange)})}):null,e.isPicklist?r("select",{classMap:S,attrs:{required:e.field.is_required?"":null},key:9,on:T||(t._m4={change:o(e.handleChange)})},w([a(fe,11),_(e.picklistOptions,function(m){return a(me,u(13,m.value),[p(0,{attrs:{value:m.value,selected:e.value?"":null}},null),p(1,null,s(m.label))])})])):null,e.isTextarea?a(be,15,[p(0,{on:k||(t._m6={input:o(e.handleChange)}),attrs:{required:e.field.is_required?"":null}},null),p(1,null,s(e.value))]):null])]}var xe=O(g);g.stylesheets=[],g.stylesheetToken="lwc-60e83e2d16t",g.legacyStylesheetToken="custom-dynamicField_dynamicField",R&&g.stylesheets.push.apply(g.stylesheets,R),F(g);class A extends L{constructor(...e){super(...e);this.field=void 0,this.value=void 0}get isText(){return this.field.data_type==="TEXT"||this.field.data_type==="EMAIL"||this.field.data_type==="URL"}get isNumber(){return this.field.data_type==="NUMBER"||this.field.data_type==="CURRENCY"||this.field.data_type==="PERCENT"}get isCheckbox(){return this.field.data_type==="CHECKBOX"}get isDate(){return this.field.data_type==="DATE"}get isDateTime(){return this.field.data_type==="DATETIME"}get isPicklist(){return this.field.data_type==="PICKLIST"}get isTextarea(){return this.field.data_type==="TEXT_AREA"||this.field.data_type==="RICH_TEXT"}get picklistOptions(){return!this.field.metadata_json||!this.field.metadata_json.values?[]:this.field.metadata_json.values.map(e=>({label:e,value:e}))}get step(){return this.field.metadata_json&&this.field.metadata_json.precision!==void 0?Math.pow(10,-this.field.metadata_json.precision):"any"}handleChange(e){const l=this.field.data_type==="CHECKBOX"?e.target.checked:e.target.value;this.dispatchEvent(new CustomEvent("change",{detail:{fieldId:this.field.id,apiName:this.field.api_name,value:l}}))}}M(A,{publicProps:{field:{config:0},value:{config:0}}});const ke=P(A,{tmpl:xe,sel:"custom-dynamic-field",apiVersion:66}),we=n`<h1${3}>Schema Engine Manager</h1>`,$e=n`<button class="btn-primary${0}"${2}>New Object</button>`,Te=n`<button class="btn-secondary${0}"${2}>Back to Objects</button>`,Ce=n`<div class="card${0}"${"a0:data-id"}${2}><h3${3}>${"t2"}</h3><p${3}>${"t4"}</p></div>`,Se=n`<div class="detail-header${0}"${2}><h2${3}>${"t2"}<small${3}>${"t4"}</small></h2><div class="actions${0}"${2}><button class="btn-primary${0}"${2}>Add Field</button><button class="btn-secondary${0}"${2}>${"t9"}</button></div></div>`,je=n`<h3${3}>${"t1"}</h3>`,Ee=n`<li class="field-item${0}"${2}><strong${3}>${"t2"}</strong><span class="badge${0}"${2}>${"t4"}</span></li>`,Oe=n`<button class="btn-link${0}"${2}>Cancel</button>`,Fe=n`<h3${3}>Record Creator Preview</h3>`,Me=n`<div class="debug-values${0}"${2}><pre${3}>${"t2"}</pre></div>`,Pe={classMap:{container:!0},key:0},Le={classMap:{header:!0},key:1},ze={classMap:{grid:!0},key:8},Ne={classMap:{"content-split":!0},key:13},Ve={classMap:{"field-list":!0},key:14},Ie={key:17},Be={classMap:{"interaction-area":!0},key:20},De={classMap:{modal:!0},key:21},Re={classMap:{"form-preview":!0},key:25};function y(c,e,l,t){const{st:s,b:i,sp:a,h:r,k:o,d:u,i:p,c:_,f:w}=c,{_m0:$,_m1:v,_m2:j,_m3:x,_m4:T,_m5:C,_m6:k,_m7:m,_m8:E,_m9:z,_m10:d,_m11:q}=t;return[r("div",Pe,[r("header",Le,[s(we,3),e.selectedObject?null:s($e,5,[a(0,{on:v||(t._m1={click:i(e.handleCreateObject)})},null)]),e.selectedObject?s(Te,7,[a(0,{on:x||(t._m3={click:i(e.handleBack)})},null)]):null]),e.selectedObject?null:r("div",ze,p(e.objects,function(h){return s(Ce,o(10,h.id),[a(0,{on:C||(t._m5={click:i(e.handleObjectSelect)}),attrs:{"data-id":h.id}},null),a(2,null,u(h.label)),a(4,null,u(h.api_name))])})),e.selectedObject?s(Se,12,[a(2,null,u(e.selectedObject.label)+" "),a(4,null,"("+u(e.selectedObject.api_name)+")"),a(6,{on:k||(t._m6={click:i(e.openWizard)})},null),a(8,{on:m||(t._m7={click:i(e.toggleFormPreview)})},null),a(9,null,u(e.previewButtonLabel))]):null,e.selectedObject?r("div",Ne,[r("div",Ve,[s(je,16,[a(1,null,"Fields ("+u(e.fields.length)+")")]),r("ul",Ie,p(e.fields,function(h){return s(Ee,o(19,h.id),[a(2,null,u(h.label)),a(4,null,u(h.data_type))])}))]),r("div",Be,[e.showWizard?r("div",De,[_("custom-field-wizard",pe,{props:{objectId:e.selectedObject.id},key:22,on:E||(t._m8={success:i(e.handleWizardSuccess)})}),s(Oe,24,[a(0,{on:d||(t._m10={click:i(e.closeWizard)})},null)])]):null,e.showFormPreview?r("div",Re,w([s(Fe,27),p(e.fields,function(h){return _("custom-dynamic-field",ke,{props:{field:h},key:o(28,h.id),on:q||(t._m11={change:i(e.handleFieldChange)})})}),s(Me,30,[a(2,null,u(e.jsonValues))])])):null])]):null])]}var Ae=O(y);y.stylesheets=[],y.stylesheetToken="lwc-33noggn95pi",y.legacyStylesheetToken="custom-schemaManager_schemaManager",N&&y.stylesheets.push.apply(y.stylesheets,N),F(y);class W extends L{constructor(...e){super(...e);this.objects=[],this.selectedObject=null,this.fields=[],this.showWizard=!1,this.showFormPreview=!1,this.formValues={}}connectedCallback(){this.loadObjects()}async loadObjects(){try{const e=await fetch("/api/schema/objects");this.objects=await e.json()}catch(e){console.error(e)}}async handleObjectSelect(e){const l=e.currentTarget.dataset.id;this.selectedObject=this.objects.find(t=>t.id===l),this.loadFields(l),this.showFormPreview=!1,this.showWizard=!1}async loadFields(e){try{const l=await fetch(`/api/schema/objects/${e}/fields`);this.fields=await l.json()}catch(l){console.error(l)}}handleBack(){this.selectedObject=null,this.fields=[]}openWizard(){this.showWizard=!0}handleWizardSuccess(e){console.log("Field Created!",e.detail),this.showWizard=!1,this.selectedObject&&this.loadFields(this.selectedObject.id)}closeWizard(){this.showWizard=!1}toggleFormPreview(){this.showFormPreview=!this.showFormPreview,this.formValues={}}handleFieldChange(e){const{apiName:l,value:t}=e.detail;this.formValues={...this.formValues,[l]:t}}get previewButtonLabel(){return this.showFormPreview?"Hide Preview":"Preview Form"}get jsonValues(){return JSON.stringify(this.formValues,null,2)}handleCreateObject(){const e=prompt('Enter Object Label (e.g. "Ticket"):');if(!e)return;const l=prompt('Enter Plural Label (e.g. "Tickets"):');!l||fetch("/api/schema/objects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({label:e,plural_label:l})}).then(()=>this.loadObjects())}}M(W,{track:{objects:1,selectedObject:1,fields:1,showWizard:1,showFormPreview:1,formValues:1}});const We=P(W,{tmpl:Ae,sel:"custom-schema-manager",apiVersion:66});export{We as default};
