import{parseFragment as r,registerTemplate as b,freezeTemplate as y,registerDecorators as v,registerComponent as x,LightningElement as $}from"/1/bundle/esm/l/en-US/bi/0/module/mi/lwc%2Fv%2F8_28_0/s/sha256-YEjxo0QDCp_Ri6v5gTkCFurICNw6jRY4sdZ3D70_fxc/bundle_lwc.js";function He(s,e,a){var t=s?"["+s+"]":"";return[".builder-root",t," {display: flex;flex-direction: column;height: 100vh;overflow: hidden;--header-height: 60px;}.workspace",t," {display: flex;flex: 1;min-height: 0;width: 100%;}.left-container",t," {display: flex;height: 100%;border-right: 1px solid #e2e8f0;background: white;z-index: 10;}custom-activity-bar",t,",custom-side-panel",t," {display: flex;flex-direction: column;height: 100%;}.canvas-area",t," {flex: 1;background-color: #f3f4f6;overflow: hidden;position: relative;display: flex;flex-direction: column;min-height: 0;font-family: var(--s-font-family, sans-serif);color: var(--s-text-primary, #1f2937);}.canvas-viewport",t," {flex: 1;width: 100%;height: 100%;overflow-y: auto;overflow-x: hidden;padding: 2rem;}.canvas-container",t," {width: 100%;max-width: 1200px;background: var(--s-bg-page, white);min-height: 100%;box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);padding-bottom: 4rem;margin: 0 auto;position: relative;}.empty-state",t," {display: flex;flex-direction: column;align-items: center;justify-content: center;height: 300px;border: 2px dashed #cbd5e1;margin: 2rem;color: #64748b;border-radius: 0.5rem;}.builder-block",t," {position: relative;border: 2px solid transparent;transition: all 0.2s ease;}.builder-block:hover",t," {border-color: var(--s-bg-primary, #3b82f6);}.builder-block.selected",t," {border-color: var(--s-bg-primary, #3b82f6);box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);z-index: 10;}.builder-block.drop-target",t," {border-bottom: 4px solid var(--s-bg-primary, #3b82f6);background-color: rgba(59, 130, 246, 0.05);}.component-overlay",t," {position: absolute;top: 0;left: 0;width: 100%;height: 100%;pointer-events: none;display: none;border: 2px solid var(--s-bg-primary, #3b82f6);z-index: 50;}.builder-block:hover",t," .component-overlay",t,",.builder-block.selected",t," .component-overlay",t," {display: block;}.component-label",t," {position: absolute;top: -24px;left: -2px;background: var(--s-bg-primary, #3b82f6);color: white;padding: 2px 8px;font-size: 12px;border-radius: 4px 4px 0 0;text-transform: uppercase;}.delete-btn",t," {pointer-events: auto;position: absolute;top: -12px;right: -12px;width: 24px;height: 24px;background: white;border: 1px solid #ef4444;color: #ef4444;border-radius: 50%;display: flex;align-items: center;justify-content: center;cursor: pointer;opacity: 0;transition: opacity 0.2s;}.builder-block:hover",t," .delete-btn",t," {opacity: 1;}.delete-btn:hover",t," {background: #ef4444;color: white;}.hero-section",t," {padding: 4rem 2rem;background-color: var(--s-bg-primary, #3b82f6);color: white;text-align: center;}.hero-content",t," h1",t," {font-size: 3rem;margin-bottom: 1rem;font-weight: 800;}.hero-content",t," p",t," {font-size: 1.25rem;margin-bottom: 2rem;opacity: 0.9;}.hero-content",t," .btn",t," {background: white;color: var(--s-bg-primary, #3b82f6);padding: 0.75rem 1.5rem;border-radius: 0.375rem;font-weight: 600;border: none;cursor: pointer;}.features-section",t," {padding: 4rem 2rem;background: white;text-align: center;}.features-section",t," h2",t," {font-size: 2.25rem;margin-bottom: 3rem;color: var(--s-text-primary, #1f2937);}.features-grid",t," {display: grid;grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));gap: 2rem;}.feature-item",t," {padding: 1.5rem;}.feature-item",t," .icon",t," {font-size: 2rem;margin-bottom: 1rem;color: var(--s-bg-primary, #3b82f6);}.feature-item",t," h3",t," {font-size: 1.25rem;margin-bottom: 0.5rem;color: var(--s-text-primary, #1f2937);}.feature-item",t," p",t," {color: #6b7280;}.site-footer",t," {padding: 2rem;background: var(--s-text-primary, #1f2937);color: white;text-align: center;}.footer-content",t," {display: flex;flex-direction: column;gap: 1rem;}.footer-links",t," {display: flex;gap: 1.5rem;justify-content: center;color: #9ca3af;}.text-block",t," {padding: 2rem;color: var(--s-text-primary, #1f2937);}.rich-text-content",t," h2",t," {color: var(--s-bg-primary, #3b82f6);}.image-block",t," {padding: 1rem;text-align: center;}.image-block",t," img",t," {max-width: 100%;height: auto;border-radius: 0.5rem;}.image-block",t," .caption",t," {margin-top: 0.5rem;color: #6b7280;font-style: italic;}.card-component",t," {border: 1px solid #e2e8f0;border-radius: 0.5rem;overflow: hidden;max-width: 350px;margin: 1rem auto;box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);background: white;}.card-image-placeholder",t," {height: 200px;background-color: var(--s-bg-primary, #3b82f6);}.card-body",t," {padding: 1.5rem;}.card-body",t," h3",t," {font-size: 1.25rem;margin-bottom: 0.5rem;color: var(--s-text-primary, #1f2937);}.card-body",t," p",t," {color: #6b7280;margin-bottom: 1.5rem;}.card-body",t," .btn-outline",t," {background: transparent;border: 1px solid var(--s-bg-primary, #3b82f6);color: var(--s-bg-primary, #3b82f6);padding: 0.5rem 1rem;border-radius: 0.25rem;cursor: pointer;width: 100%;}.card-body",t," .btn-outline:hover",t," {background: var(--s-bg-primary, #3b82f6);color: white;}.notification",t," {position: fixed;top: 80px;right: 24px;padding: 12px 20px;border-radius: 8px;font-size: 14px;font-weight: 500;box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);transform: translateX(400px);opacity: 0;transition: all 0.3s ease-in-out;z-index: 1000;max-width: 320px;}.notification.show",t," {transform: translateX(0);opacity: 1;}.notification-success",t," {background-color: #10b981;color: white;border-left: 4px solid #059669;}.notification-error",t," {background-color: #ef4444;color: white;border-left: 4px solid #dc2626;}.notification-info",t," {background-color: #3b82f6;color: white;border-left: 4px solid #2563eb;}"].join("")}var te=[He];function Me(s,e,a){var t=s?"["+s+"]":"",o=s?"["+s+"-host]":"";return(e?":host {":o+" {")+"display: block;width: 100%;}.site-header"+t+" {display: flex;justify-content: space-between;align-items: center;padding: 0 1.5rem;height: 64px;background-color: #fff;border-bottom: 1px solid #e5e7eb;box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);}.branding"+t+" {display: flex;align-items: center;gap: 0.75rem;}.logo-icon"+t+" {display: flex;align-items: center;justify-content: center;}.brand-name"+t+" {font-family: var(--font-primary, sans-serif);font-weight: 600;font-size: 1.25rem;color: #1f2937;letter-spacing: -0.025em;}.actions"+t+" {display: flex;align-items: center;gap: 0.75rem;}.btn"+t+" {padding: 0.5rem 1rem;border-radius: 0.375rem;font-weight: 500;font-size: 0.875rem;cursor: pointer;transition: all 0.2s;font-family: var(--font-primary, sans-serif);}.btn-primary"+t+" {background-color: #3b82f6;background-color: #2563eb;color: white;border: none;}.btn-primary:hover"+t+" {background-color: #1d4ed8;}.btn-primary"+t+" {background-color: #1e3a8a;background-color: #31419e;}.btn-secondary"+t+" {background-color: white;color: #374151;border: 1px solid #d1d5db;}.btn-secondary:hover"+t+" {background-color: #f3f4f6;}"}var ae=[Me];const Ie=r`<div class="branding${0}"${2}><div class="logo-icon${0}"${2}><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"${3}><path d="M12 2L2 19H22L12 2Z" stroke="#4F46E5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"${3}/></svg></div><span class="brand-name${0}"${2}>FlexSite</span></div>`,Ve=r`<button class="btn btn--secondary${0}"${2}>Preview</button>`,De={classMap:{"site-header":!0},key:0},Ee={classMap:{actions:!0},key:3},Ae={btn:!0,"btn--primary":!0};function k(s,e,a,t){const{st:o,b:n,t:i,h:p,sp:l}=s,{_m0:h,_m1:w,_m2:m}=t;return[p("header",De,[o(Ie,2),p("div",Ee,[p("button",{classMap:Ae,attrs:{disabled:e.isSaving?"":null},key:4,on:h||(t._m0={click:n(e.handleSave)})},[e.isSaving?i("Saving..."):null,e.isSaving?null:i("Save")]),o(Ve,6,[l(0,{on:m||(t._m2={click:n(e.handlePreview)})},null)])])])]}var Fe=b(k);k.stylesheets=[],k.stylesheetToken="lwc-4v8hkok2cm8",k.legacyStylesheetToken="components-header_header",ae&&k.stylesheets.push.apply(k.stylesheets,ae),y(k);class O extends ${constructor(...e){super(...e);this.isSaving=!1}handleSave(){this.dispatchEvent(new CustomEvent("save"))}handlePreview(){this.dispatchEvent(new CustomEvent("preview"))}}O.renderMode="light",v(O,{publicProps:{isSaving:{config:0}}});const Be=x(O,{tmpl:Fe,sel:"components-header",apiVersion:66});function Ne(s,e,a){var t=s?"["+s+"]":"";return".activity-bar"+t+" {display: flex;flex-direction: column;width: 60px;background-color: #0f172a;height: 100%;z-index: 40;align-items: center;padding-top: 1rem;}.activity-tab"+t+" {width: 40px;height: 40px;display: flex;align-items: center;justify-content: center;margin-bottom: 0.5rem;border-radius: 4px;cursor: pointer;color: #94a3b8;transition: all 0.2s;}.activity-tab:hover"+t+" {color: #fff;background-color: rgba(255, 255, 255, 0.1);}.activity-tab.active"+t+" {color: #fff;background-color: #3b82f6;box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);}.activity-tab"+t+" svg"+t+" {width: 24px;height: 24px;fill: currentColor;}"}var oe=[Ne];const ze=r`<div class="activity-bar${0}"${2}><div${"c1"} data-id="panel-theme" title="Branding"${2}><svg viewBox="0 0 24 24"${3}><path d="M7,2V13H10V22L17,10H13L17,2H7Z"${3}/></svg></div><div${"c4"} data-id="panel-build" title="Components"${2}><svg viewBox="0 0 24 24"${3}><path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"${3}/></svg></div><div${"c7"} data-id="panel-structure" title="Structure"${2}><svg viewBox="0 0 24 24"${3}><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z"${3}/></svg></div><div${"c10"} data-id="panel-pages" title="Pages"${2}><svg viewBox="0 0 24 24"${3}><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"${3}/></svg></div><div style="flex: 1;"${3}></div><div${"c14"} data-id="panel-settings" title="Settings"${2}><svg viewBox="0 0 24 24"${3}><path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"${3}/></svg></div></div>`;function _(s,e,a,t){const{b:o,ncls:n,sp:i,st:p}=s,{_m0:l,_m1:h,_m2:w,_m3:m,_m4:d}=t;return[p(ze,1,[i(1,{on:l||(t._m0={click:o(e.handleTabClick)}),className:n(e.computedClassTheme)},null),i(4,{on:h||(t._m1={click:o(e.handleTabClick)}),className:n(e.computedClassBuild)},null),i(7,{on:w||(t._m2={click:o(e.handleTabClick)}),className:n(e.computedClassStructure)},null),i(10,{on:m||(t._m3={click:o(e.handleTabClick)}),className:n(e.computedClassPages)},null),i(14,{on:d||(t._m4={click:o(e.handleTabClick)}),className:n(e.computedClassSettings)},null)])]}var je=b(_);_.stylesheets=[],_.stylesheetToken="lwc-4lnk5tjturq",_.legacyStylesheetToken="custom-activityBar_activityBar",oe&&_.stylesheets.push.apply(_.stylesheets,oe),y(_);class R extends ${constructor(...e){super(...e);this.activeTab="panel-build"}handleTabClick(e){const a=e.currentTarget.dataset.id;this.dispatchEvent(new CustomEvent("tabselect",{detail:a}))}get computedClassTheme(){return`activity-tab ${this.activeTab==="panel-theme"?"active":""}`}get computedClassBuild(){return`activity-tab ${this.activeTab==="panel-build"?"active":""}`}get computedClassStructure(){return`activity-tab ${this.activeTab==="panel-structure"?"active":""}`}get computedClassPages(){return`activity-tab ${this.activeTab==="panel-pages"?"active":""}`}get computedClassSettings(){return`activity-tab ${this.activeTab==="panel-settings"?"active":""}`}}R.renderMode="light",v(R,{publicProps:{activeTab:{config:0}}});const Oe=x(R,{tmpl:je,sel:"custom-activity-bar",apiVersion:66});function Re(s,e,a){var t=s?"["+s+"]":"";return[".side-panel",t," {display: flex;flex-direction: column;width: 300px;background-color: #fff;border-right: 1px solid var(--s-border-default);flex-shrink: 0;height: 100%;color: var(--s-text-primary);margin: 0;}.panel-header",t," {display: flex;justify-content: space-between;align-items: center;padding: 1rem;border-bottom: 1px solid var(--s-border-default);}.panel-title",t," {font-size: 1.125rem;font-weight: 700;color: var(--s-text-primary);margin: 0;}.btn-icon",t," {width: 28px;height: 28px;display: flex;align-items: center;justify-content: center;background: transparent;border: 1px solid var(--s-border-default);border-radius: 4px;cursor: pointer;color: var(--s-text-secondary);transition: all 0.2s;}.btn-icon:hover",t," {border-color: #3b82f6;color: #3b82f6;background: #f0f9ff;}.btn-icon",t," svg",t," {fill: currentColor;}.panel-content",t," {flex: 1;overflow-y: auto;padding: 1rem;}.component-item",t," {display: flex;align-items: center;padding: 0.75rem;margin-bottom: 0.5rem;background: #fff;border: 1px solid var(--s-border-default);border-radius: 4px;cursor: grab;transition: all 0.2s;}.component-item:hover",t," {border-color: #3b82f6;transform: translateX(2px);}.component-icon",t," {width: 32px;height: 32px;background: #f1f5f9;border-radius: 4px;margin-right: 0.75rem;display: flex;align-items: center;justify-content: center;color: #64748b;}.component-icon",t," svg",t," {fill: currentColor;}.structure-tree",t," {display: flex;flex-direction: column;gap: 4px;}.tree-item",t," {border: 1px solid var(--s-border-default);border-radius: 4px;overflow: hidden;transition: all 0.2s;}.tree-item:hover",t," {border-color: #3b82f6;}.tree-item-content",t," {display: flex;align-items: center;padding: 0.75rem;cursor: pointer;position: relative;}.tree-item-content:hover",t," {background: #f8fafc;}.tree-icon",t," {width: 28px;height: 28px;display: flex;align-items: center;justify-content: center;background: #f1f5f9;border-radius: 4px;margin-right: 0.75rem;color: #64748b;flex-shrink: 0;}.tree-icon",t," svg",t," {fill: currentColor;}.tree-label",t," {flex: 1;min-width: 0;}.tree-label",t," strong",t," {display: block;font-size: 0.875rem;font-weight: 600;color: var(--s-text-primary);margin-bottom: 2px;}.tree-label",t," small",t," {display: block;font-size: 0.75rem;color: var(--s-text-secondary);text-transform: uppercase;letter-spacing: 0.03em;}.tree-label",t," small.tree-preview",t," {text-transform: none;font-style: italic;color: #6366f1;margin-top: 4px;font-size: 0.6875rem;letter-spacing: 0;}.tree-delete",t," {width: 24px;height: 24px;display: flex;align-items: center;justify-content: center;background: transparent;border: none;border-radius: 4px;cursor: pointer;color: #94a3b8;transition: all 0.2s;margin-left: 8px;}.tree-delete:hover",t," {background: #fee2e2;color: #dc2626;}.tree-delete",t," svg",t," {fill: currentColor;}.empty-panel",t," {display: flex;flex-direction: column;align-items: center;justify-content: center;padding: 2rem 1rem;text-align: center;color: var(--s-text-secondary);}.empty-panel",t," svg",t," {margin-bottom: 1rem;fill: currentColor;}.empty-panel",t," p",t," {margin: 0 0 0.5rem 0;font-size: 0.9375rem;font-weight: 500;color: var(--s-text-primary);}.empty-panel",t," small",t," {font-size: 0.8125rem;color: var(--s-text-secondary);}.page-item",t," {display: flex;align-items: center;justify-content: space-between;padding: 0.75rem;margin-bottom: 0.5rem;background: #fff;border: 1px solid var(--s-border-default);border-radius: 4px;transition: all 0.2s;}.page-item:hover",t," {border-color: #3b82f6;}.page-item-content",t," {display: flex;align-items: center;flex: 1;cursor: pointer;}.page-icon",t," {width: 32px;height: 32px;background: #f1f5f9;border-radius: 4px;margin-right: 0.75rem;display: flex;align-items: center;justify-content: center;color: #64748b;}.page-icon",t," svg",t," {fill: currentColor;}.page-details",t," {flex: 1;}.page-details",t," strong",t," {display: block;font-size: 0.875rem;font-weight: 600;color: var(--s-text-primary);margin-bottom: 2px;}.page-details",t," small",t," {font-size: 0.75rem;color: var(--s-text-secondary);}.badge-active",t," {display: inline-block;padding: 2px 8px;background: #dbeafe;color: #1e40af;border-radius: 4px;font-size: 0.6875rem;font-weight: 600;text-transform: uppercase;letter-spacing: 0.03em;}.page-delete",t," {width: 24px;height: 24px;display: flex;align-items: center;justify-content: center;background: transparent;border: none;border-radius: 4px;cursor: pointer;color: #94a3b8;transition: all 0.2s;margin-left: 8px;}.page-delete:hover",t," {background: #fee2e2;color: #dc2626;}.page-delete",t," svg",t," {fill: currentColor;}.form-group",t," {margin-bottom: 1rem;}.form-label",t," {display: block;margin-bottom: 0.25rem;font-size: 0.875rem;font-weight: 600;color: var(--s-text-primary);}.form-label",t,' input[type="checkbox"]',t," {margin-right: 0.5rem;}.form-input",t," {width: 100%;padding: 0.5rem;border: 1px solid var(--s-border-default);border-radius: 4px;font-size: 0.875rem;color: var(--s-text-primary);background-color: #fff;font-family: inherit;}.form-input:focus",t," {outline: none;border-color: #3b82f6;box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);}.form-select",t," {width: 100%;padding: 0.5rem;border: 1px solid var(--s-border-default);border-radius: 4px;font-size: 0.875rem;color: var(--s-text-primary);background-color: #fff;cursor: pointer;}.form-select:focus",t," {outline: none;border-color: #3b82f6;}.btn-outline-full",t," {width: 100%;padding: 0.5rem;border: 1px solid var(--s-border-default);background: transparent;color: var(--s-text-primary);border-radius: 4px;font-size: 0.875rem;cursor: pointer;margin-bottom: 1rem;transition: all 0.2s;}.btn-outline-full:hover",t," {border-color: #3b82f6;color: #3b82f6;}.btn-primary-full",t," {width: 100%;padding: 0.625rem 1rem;border: none;background: #4f46e5;color: white;border-radius: 4px;font-size: 0.875rem;font-weight: 500;cursor: pointer;transition: all 0.2s;display: flex;align-items: center;justify-content: center;}.btn-primary-full:hover",t," {background: #4338ca;}.btn-primary-full",t," svg",t," {fill: currentColor;}.panel-divider",t," {border: 0;border-top: 1px solid var(--s-border-default);margin: 1.5rem 0;}.section-title",t," {font-size: 0.75rem;font-weight: 700;color: var(--s-text-secondary);text-transform: uppercase;letter-spacing: 0.05em;margin-bottom: 1rem;}.color-item",t," {display: flex;justify-content: space-between;align-items: center;margin-bottom: 0.75rem;}.color-item",t," label",t," {font-size: 0.875rem;color: var(--s-text-primary);}.color-item",t,' input[type="color"]',t," {width: 32px;height: 32px;padding: 0;border: 1px solid var(--s-border-default);border-radius: 4px;background: none;cursor: pointer;}.btn-back",t," {display: flex;align-items: center;background: transparent;border: none;border-radius: 4px;padding: 0.5rem;font-size: 0.875rem;color: var(--s-text-secondary);cursor: pointer;transition: all 0.2s;margin-bottom: 0.5rem;}.btn-back:hover",t," {background: #f1f5f9;color: var(--s-text-primary);}.btn-back",t," svg",t," {fill: currentColor;}.editor-title",t," {font-size: 1rem;font-weight: 700;color: var(--s-text-primary);margin: 0 0 1rem 0;padding-bottom: 0.5rem;border-bottom: 1px solid var(--s-border-default);}"].join("")}var se=[Re];const Ze=r`<div class="panel-header${0}"${2}><h3 class="panel-title${0}"${2}>Components</h3></div>`,Ue=r`<div class="component-item${0}" draggable="true"${"a0:data-type"}${2}><div class="component-icon${0}"${2}><svg style="width: 16px; height: 16px;" viewBox="0 0 24 24"${3}><path${"a3:d"}${3}/></svg></div><div${3}><strong style="display: block; font-size: 0.875rem;"${3}>${"t6"}</strong><small style="color: var(--s-text-secondary);"${3}>${"t8"}</small></div></div>`,We=r`<div class="panel-header${0}"${2}><h3 class="panel-title${0}"${2}>Branding</h3></div>`,Je=r`<label class="form-label${0}"${2}>Theme Layout</label>`,Ye=r`<option${"a0:value"}${"a0:selected"}${3}>${"t1"}</option>`,qe=r`<label class="form-label${0}"${2}>Active Brand Set</label>`,Ge=r`<option${"a0:value"}${"a0:selected"}${3}>${"t1"}</option>`,Xe=r`<button class="btn-outline-full${0}"${2}>Save as New Smart Set</button>`,Ke=r`<hr class="panel-divider${0}"${2}>`,Qe=r`<h4 class="section-title${0}"${2}>COLORS</h4>`,et=r`<label${3}>Primary Color</label>`,tt=r`<label${3}>Background</label>`,at=r`<label${3}>Text Color</label>`,ot=r`<br${3}>`,st=r`<h4 class="section-title${0}"${2}>TYPOGRAPHY</h4>`,nt=r`<label class="form-label${0}"${2}>Primary Font</label>`,rt=r`<option${"a0:value"}${3}>${"t1"}</option>`,it=r`<label class="form-label${0}"${2}>Heading Font</label>`,lt=r`<option${"a0:value"}${3}>${"t1"}</option>`,ct=r`<div class="panel-header${0}"${2}><h3 class="panel-title${0}"${2}>Page Structure</h3></div>`,dt=r`<button class="btn-back${0}"${2}><svg style="width: 16px; height: 16px; vertical-align: middle; margin-right: 4px;" viewBox="0 0 24 24"${3}><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"${3}/></svg>Back to Structure</button>`,pt=r`<h4 class="editor-title${0}"${2}>${"t1"}</h4>`,gt=r`<label class="form-label${0}"${2}>${"t1"}</label>`,ht=r`<textarea class="form-input${0}" rows="4"${"a0:data-name"}${2}>${"t1"}</textarea>`,mt=r`<div class="tree-item${0}"${2}><div class="tree-item-content${0}"${"a1:data-id"}${2}><div class="tree-icon${0}"${2}><svg style="width: 14px; height: 14px;" viewBox="0 0 24 24"${3}><path d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,19H5V5H19V19Z"${3}/></svg></div><div class="tree-label${0}"${2}><strong${3}>${"t7"}</strong><small${3}>${"t9"}</small><small class="tree-preview${0}"${2}>${"t11"}</small></div><button class="tree-delete${0}"${"a12:data-id"}${2}><svg style="width: 12px; height: 12px;" viewBox="0 0 24 24"${3}><path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"${3}/></svg></button></div></div>`,ut=r`<div class="empty-panel${0}"${2}><svg style="width: 48px; height: 48px; opacity: 0.3;" viewBox="0 0 24 24"${3}><path d="M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,19H5V5H19V19Z"${3}/></svg><p${3}>No components added yet</p><small${3}>Drag components from the Components tab to get started</small></div>`,ft=r`<div class="panel-header${0}"${2}><h3 class="panel-title${0}"${2}>Site Pages</h3><button class="btn-icon${0}" title="Add New Page"${2}><svg style="width: 16px; height: 16px;" viewBox="0 0 24 24"${3}><path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"${3}/></svg></button></div>`,bt=r`<div class="page-icon${0}"${2}><svg style="width: 16px; height: 16px;" viewBox="0 0 24 24"${3}><path d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z"${3}/></svg></div>`,yt=r`<div class="page-details${0}"${2}><strong${3}>${"t2"}</strong><small${3}>${"t4"}</small></div>`,vt=r`<button class="page-action-btn${0}"${"a0:data-id"} title="Rename" style="margin-right: 4px; background: none; border: none; cursor: pointer; color: var(--s-text-secondary);"${2}><svg style="width: 14px; height: 14px;" viewBox="0 0 24 24"${3}><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" fill="currentColor"${3}/></svg></button>`,xt=r`<span class="badge-active${0}"${2}>Active</span>`,$t=r`<button class="page-delete${0}"${"a0:data-id"}${2}><svg style="width: 12px; height: 12px;" viewBox="0 0 24 24"${3}><path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"${3}/></svg></button>`,wt=r`<div class="panel-header${0}"${2}><h3 class="panel-title${0}"${2}>Settings</h3></div>`,kt=r`<h4 class="section-title${0}"${2}>SITE INFORMATION</h4>`,_t=r`<label class="form-label${0}"${2}>Site Title</label>`,Ct=r`<div class="form-group${0}"${2}><label class="form-label${0}"${2}>Site Description</label><textarea class="form-input${0}" rows="3"${"a3:value"} data-field="description" placeholder="A brief description of your site"${2}></textarea></div>`,St=r`<hr class="panel-divider${0}"${2}>`,Tt=r`<h4 class="section-title${0}"${2}>EXPORT &amp; DEPLOY</h4>`,Lt=r`<div class="form-group${0}"${2}><label class="form-label${0}"${2}>Export Format</label><select class="form-select${0}" data-field="exportFormat"${2}><option value="html"${3}>Static HTML</option><option value="zip"${3}>ZIP Archive</option><option value="json"${3}>JSON Data</option></select></div>`,Pt=r`<button class="btn-primary-full${0}"${2}><svg style="width: 14px; height: 14px; margin-right: 6px;" viewBox="0 0 24 24"${3}><path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" fill="currentColor"${3}/></svg>Export Website</button>`,Ht=r`<hr class="panel-divider${0}"${2}>`,Mt=r`<h4 class="section-title${0}"${2}>ADVANCED</h4>`,It=r`<div class="form-group${0}"${2}><label class="form-label${0}"${2}>Viewport Width (Preview)</label><select class="form-select${0}" data-field="viewportWidth"${2}><option value="100%"${3}>Full Width</option><option value="1440px"${3}>Desktop (1440px)</option><option value="768px"${3}>Tablet (768px)</option><option value="375px"${3}>Mobile (375px)</option></select></div>`,Vt={classMap:{"side-panel":!0},key:0},Dt={classMap:{"panel-content":!0},key:9},Et={classMap:{"form-group":!0},key:10},E={"form-select":!0},At={classMap:{"form-group":!0},key:16},Ft={classMap:{"color-item":!0},key:28},Bt={type:"color","data-id":"primary"},Nt={classMap:{"color-item":!0},key:32},zt={type:"color","data-id":"background"},jt={classMap:{"color-item":!0},key:36},Ot={type:"color","data-id":"text"},Rt={classMap:{"form-group":!0},key:44},Zt={"data-id":"primary"},Ut={classMap:{"form-group":!0},key:50},Wt={"data-id":"heading"},Jt={classMap:{"panel-content":!0},key:59},Yt={classMap:{"property-editor":!0},key:61},qt={"form-group":!0},ne={"form-input":!0},Gt={classMap:{"structure-tree":!0},key:73},Xt={classMap:{"panel-content":!0},key:81},Kt={"page-item":!0},Qt={"page-item-content":!0},ea={classMap:{"panel-content":!0},key:97},ta={classMap:{"form-group":!0},key:100},aa={type:"text","data-field":"title",placeholder:"My Awesome Site"},oa={classMap:{"form-group":!0},key:118},sa={classMap:{"form-label":!0},key:119},na={type:"checkbox","data-field":"responsiveMode"},ra={classMap:{"form-group":!0},key:121},ia={classMap:{"form-label":!0},key:122},la={type:"checkbox","data-field":"autoSave"};function C(s,e,a,t){const{st:o,k:n,b:i,d:p,sp:l,i:h,f:w,fr:m,h:d,t:V}=s,{_m0:Q,_m1:F,_m2:B,_m3:N,_m4:ee,_m5:z,_m6:j,_m7:g,_m8:D,_m9:ge,_m10:he,_m11:ro,_m12:me,_m13:io,_m14:ue,_m15:fe,_m16:be,_m17:ye,_m18:ve,_m19:xe,_m20:lo,_m21:$e,_m22:co,_m23:we,_m24:ke,_m25:_e,_m26:Ce,_m27:po,_m28:Se,_m29:Te,_m30:Le,_m31:Pe}=t;return[d("div",Vt,[e.isBuildTab?m(1,w([o(Ze,3),h(e.availableComponents,function(c){return o(Ue,n(5,c.type),[l(0,{on:F||(t._m1={dragstart:i(e.handleDragStart)}),attrs:{"data-type":c.type}},null),l(3,{attrs:{d:c.icon}},null),l(6,null,p(c.label)),l(8,null,p(c.subtitle))])})]),0):null,e.isThemeTab?m(6,[o(We,8),d("div",Dt,[d("div",Et,[o(Je,12),d("select",{classMap:E,key:13,on:B||(t._m2={change:i(e.handleThemeChange)})},h(e.themeLayoutOptions,function(c){return o(Ye,n(15,c.value),[l(0,{attrs:{value:c.value,selected:c.selected?"":null}},null),l(1,null,p(c.label))])}))]),d("div",At,[o(qe,18),d("select",{classMap:E,key:19,on:N||(t._m3={change:i(e.handleBrandSetChange)})},h(e.brandSetOptions,function(c){return o(Ge,n(21,c.value),[l(0,{attrs:{value:c.value,selected:c.selected?"":null}},null),l(1,null,p(c.label))])}))]),o(Xe,23,[l(0,{on:z||(t._m5={click:i(e.handleSaveSmartSet)})},null)]),o(Ke,25),o(Qe,27),d("div",Ft,[o(et,30),d("input",{attrs:Bt,props:{value:e.colors.primary},key:31,on:j||(t._m6={input:i(e.handleColorChange)})})]),d("div",Nt,[o(tt,34),d("input",{attrs:zt,props:{value:e.colors.background},key:35,on:g||(t._m7={input:i(e.handleColorChange)})})]),d("div",jt,[o(at,38),d("input",{attrs:Ot,props:{value:e.colors.text},key:39,on:D||(t._m8={input:i(e.handleColorChange)})})]),o(ot,41),o(st,43),d("div",Rt,[o(nt,46),d("select",{classMap:E,attrs:Zt,key:47,on:ge||(t._m9={change:i(e.handleFontChange)})},h(e.fontOptions,function(c){return o(rt,n(49,c.value),[l(0,{attrs:{value:c.value}},null),l(1,null,p(c.label))])}))]),d("div",Ut,[o(it,52),d("select",{classMap:E,attrs:Wt,key:53,on:he||(t._m10={change:i(e.handleFontChange)})},h(e.fontOptions,function(c){return o(lt,n(55,c.value),[l(0,{attrs:{value:c.value}},null),l(1,null,p(c.label))])}))])])],0):null,e.isStructureTab?m(56,[o(ct,58),d("div",Jt,[e.isEditing?m(60,[d("div",Yt,w([o(dt,63,[l(0,{on:me||(t._m12={click:i(e.handleBackToStructure)})},null)]),o(pt,65,[l(1,null,"Edit "+p(e.selectedComponentLabel))]),h(e.propertyFields,function(c){return d("div",{classMap:qt,key:n(66,c.name)},[o(gt,68,[l(1,null,p(c.label))]),c.isTextarea?m(69,[o(ht,71,[l(0,{on:ue||(t._m14={input:i(e.handlePropertyChange)}),attrs:{"data-name":c.name}},null),l(1,null,p(c.value))])],0):m(69,[d("input",{classMap:ne,attrs:{type:"text","data-name":c.name},props:{value:c.value},key:72,on:fe||(t._m15={input:i(e.handlePropertyChange)})})],0)])})]))],0):m(60,[e.hasComponents?d("div",Gt,h(e.componentStructure,function(c){return o(mt,n(75,c.id),[l(1,{on:be||(t._m16={click:i(e.handleComponentSelect)}),attrs:{"data-id":c.id}},null),l(7,null,p(c.label)),l(9,null,p(c.type)),l(11,null,p(c.preview)),l(12,{on:ye||(t._m17={click:i(e.handleComponentDeleteFromTree)}),attrs:{"data-id":c.id}},null)])})):null,e.hasComponents?null:o(ut,77)],0)])],0):null,e.isPagesTab?m(78,[o(ft,80,[l(3,{on:ve||(t._m18={click:i(e.handleAddPage)})},null)]),d("div",Xt,h(e.pages,function(c){return d("div",{classMap:Kt,attrs:{"data-id":c.id},key:n(82,c.id)},[d("div",{classMap:Qt,key:83,on:xe||(t._m19={click:i(e.handlePageSelect)})},[o(bt,85),o(yt,87,[l(2,null,p(c.name)),l(4,null,p(c.slug))]),o(vt,89,[l(0,{on:$e||(t._m21={click:i(e.handlePageRename)}),attrs:{"data-id":c.id}},null)]),c.isActive?o(xt,91):null]),c.isActive?null:o($t,93,[l(0,{on:we||(t._m23={click:i(e.handlePageDelete)}),attrs:{"data-id":c.id}},null)])])}))],0):null,e.isSettingsTab?m(94,[o(wt,96),d("div",ea,[o(kt,99),d("div",ta,[o(_t,102),d("input",{classMap:ne,attrs:aa,props:{value:e.siteSettings.title},key:103,on:ke||(t._m24={change:i(e.handleSettingChange)})})]),o(Ct,105,[l(3,{on:_e||(t._m25={change:i(e.handleSettingChange)}),attrs:{value:e.siteSettings.description}},null)]),o(St,107),o(Tt,109),o(Lt,111,[l(3,{on:Ce||(t._m26={change:i(e.handleSettingChange)})},null)]),o(Pt,113,[l(0,{on:Se||(t._m28={click:i(e.handleExportSite)})},null)]),o(Ht,115),o(Mt,117),d("div",oa,[d("label",sa,[d("input",{attrs:na,props:{checked:e.siteSettings.responsiveMode},key:120,on:Te||(t._m29={change:i(e.handleCheckboxChange)})}),V("Enable Responsive Mode")])]),d("div",ra,[d("label",ia,[d("input",{attrs:la,props:{checked:e.siteSettings.autoSave},key:123,on:Le||(t._m30={change:i(e.handleCheckboxChange)})}),V("Auto-save Changes")])]),o(It,125,[l(3,{on:Pe||(t._m31={change:i(e.handleSettingChange)})},null)])])],0):null])]}var ca=b(C);C.stylesheets=[],C.stylesheetToken="lwc-46b1l71n2mc",C.legacyStylesheetToken="custom-sidePanel_sidePanel",se&&C.stylesheets.push.apply(C.stylesheets,se),y(C);const A=[{type:"hero",label:"Hero Section",subtitle:"Headline & CTA",icon:"M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M19,19H5V5H19V19Z",defaultProps:{title:"New Hero Section",subtitle:"Subtitle goes here",ctaText:"Get Started",ctaSecondaryText:"Learn More",backgroundImage:"",textColor:"#ffffff"},fields:[{name:"title",label:"Headline",type:"text"},{name:"subtitle",label:"Subtitle",type:"text"},{name:"ctaText",label:"Primary Button Text",type:"text"},{name:"ctaSecondaryText",label:"Secondary Button Text",type:"text"},{name:"backgroundImage",label:"Background Image URL",type:"text"},{name:"textColor",label:"Text Color",type:"text"}]},{type:"features",label:"Features Grid",subtitle:"3 Columns",icon:"M3,3H11V11H3V3M13,3H21V11H13V3M3,13H11V21H3V13M13,13H21V21H13V13Z",defaultProps:{title:"Features",items:[]},fields:[{name:"title",label:"Section Title",type:"text"}]},{type:"text",label:"Text Block",subtitle:"Rich Text Content",icon:"M21,6V8H3V6H21M3,18H12V16H3V18M3,13H21V11H3V13Z",defaultProps:{content:"<h2>Rich Text Block</h2><p>Add your custom content here. This block supports basic HTML formatting.</p>"},fields:[{name:"content",label:"Content (HTML)",type:"textarea"}]},{type:"image",label:"Image",subtitle:"Responsive Image",icon:"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z",defaultProps:{src:"https://via.placeholder.com/1200x600",alt:"Placeholder Image",caption:"Image Caption"},fields:[{name:"src",label:"Image URL",type:"text"},{name:"alt",label:"Alt Text",type:"text"},{name:"caption",label:"Caption",type:"text"}]},{type:"card",label:"Card",subtitle:"Container with Shadow",icon:"M3,5H21V19H3V5M3,3A2,2 0 0,0 1,5V19A2,2 0 0,0 3,21H21A2,2 0 0,0 23,19V5A2,2 0 0,0 21,3H3M5,7V9H19V7H5M5,11V17H19V11H5Z",defaultProps:{title:"Card Title",content:"Card content goes here.",action:"Read More"},fields:[{name:"title",label:"Title",type:"text"},{name:"content",label:"Content",type:"textarea"},{name:"action",label:"Action Button",type:"text"}]},{type:"footer",label:"Footer",subtitle:"Simple Layout",icon:"M5,21H19A2,2 0 0,0 21,19V17H3V19A2,2 0 0,0 5,21M5,15H19V5H5V15Z",defaultProps:{copyright:"\xA9 2026 LWR Site Builder"},fields:[{name:"copyright",label:"Copyright Text",type:"text"}]}],u=globalThis?.LWR?.env||{};u&&(u.SSR==="true"||u.SSR),u&&u.basePath,u&&u.locale,u&&u.assetBasePath,u&&u.uiBasePath;const da=import.meta.env&&import.meta.env.API_URL||process.env.API_URL||"https://backend-six-xi-72.vercel.app",f=`${da}/api`;async function re(s,e){try{const a=await fetch(`${f}/pages/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){const t=await a.text();throw new Error(`Failed to save page: ${t}`)}return await a.json()}catch(a){throw console.error("\u274C Error saving page:",a),a}}async function Z(s=null){try{let e;if(s){const a=await fetch(`${f}/sites/${s}`);if(!a.ok)throw new Error("Failed to load site");e=await a.json()}else{const a=await fetch(`${f}/sites`);if(!a.ok)throw new Error("Failed to load sites");const t=await a.json();e=t.length>0?t[0]:null}if(e){const a=await fetch(`${f}/sites/${e.id}/pages`);a.ok?e.pages=await a.json():e.pages=[]}return e}catch(e){throw console.error("\u274C Error loading site:",e),e}}async function pa(s){try{const e=await fetch(`${f}/sites/${s}/theme`);if(!e.ok)throw new Error("Failed to load theme");return await e.json()}catch(e){return console.error("\u274C Error loading theme:",e),null}}async function ga(s,e){try{const a=await fetch(`${f}/sites/${s}/theme`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw new Error("Failed to save theme");return await a.json()}catch(a){throw console.error("\u274C Error saving theme:",a),a}}async function ha(s,e,a){try{const t=await fetch(`${f}/sites/${s}/pages`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,slug:a})});if(!t.ok)throw new Error("Failed to create page");return await t.json()}catch(t){throw console.error("\u274C Error creating page:",t),t}}async function ma(s){try{const[e,a]=await Promise.all([fetch(`${f}/pages/${s}`),fetch(`${f}/pages/${s}/components`)]);if(!e.ok||!a.ok)throw new Error("Failed to load page data");const t=await e.json(),o=await a.json();return{...t,layout:{sections:o}}}catch(e){throw console.error(`\u274C Error loading page ${s}:`,e),e}}async function ua(s){try{const e=await fetch(`${f}/pages/${s}`,{method:"DELETE"});if(!e.ok)throw new Error("Failed to delete page");return await e.json()}catch(e){throw console.error("\u274C Error deleting page:",e),e}}async function fa(s,e){try{return await(await fetch(`${f}/components/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}catch(a){throw console.error("\u274C Error updating component:",a),a}}class U extends ${constructor(...e){super(...e);this.activeTab=void 0,this.components=[],this.pages=[],this.selectedComponent=null,this.siteSettings={title:"FlexSite Builder",description:"Build amazing websites with ease",exportFormat:"html",responsiveMode:!0,autoSave:!1,viewportWidth:"100%"},this.themeLayoutOptions=[{label:"Sidebar (Left Nav)",value:"sidebar"},{label:"Top Nav",value:"topnav"},{label:"Stacked",value:"stacked"}],this.brandSetOptions=[{label:"My New Set",value:"new_set"},{label:"Corporate",value:"corporate"},{label:"Dark Mode",value:"dark"}],this.fontOptions=[{label:"Open Sans",value:"Open Sans"},{label:"Roboto",value:"Roboto"},{label:"Lora",value:"Lora"},{label:"Inter",value:"Inter"}],this.selectedThemeLayout="sidebar",this.selectedBrandSet="new_set",this.colors={primary:"#5b5fc7",background:"#e5e5e5",text:"#444444"},this.typography={primary:"Open Sans",heading:"Lora"}}async connectedCallback(){try{const e=await Z();if(e&&e.id){this.currentSiteId=e.id;const a=await pa(e.id);a&&(a.colors&&(this.colors={...this.colors,...a.colors}),a.typography&&(this.typography={...this.typography,...a.typography}),a.layout&&(this.themeLayout=a.layout),this.applyTheme(this.colors),localStorage.setItem("brandingColors",JSON.stringify({...this.colors,typography:this.typography})))}}catch(e){console.error("Failed to load theme from database, using defaults",e);const a=localStorage.getItem("brandingColors");if(a)try{const t=JSON.parse(a);this.colors=t,t.typography&&(this.typography=t.typography),this.applyTheme(this.colors)}catch(t){console.error("Failed to parse stored branding colors",t)}}}get isEditing(){return!!this.selectedComponent}get selectedComponentLabel(){return this.selectedComponent?this.getComponentLabel(this.selectedComponent.type):""}get propertyFields(){if(!this.selectedComponent)return[];const e=this.selectedComponent.props||{},a=this.selectedComponent.type,t=A.find(o=>o.type===a);return!t||!t.fields?[]:t.fields.map(o=>({...o,value:e[o.name]||"",isTextarea:o.type==="textarea"}))}get availableComponents(){return A}get isBuildTab(){return this.activeTab==="panel-build"}get isThemeTab(){return this.activeTab==="panel-theme"}get isStructureTab(){return this.activeTab==="panel-structure"}get isPagesTab(){return this.activeTab==="panel-pages"}get isSettingsTab(){return this.activeTab==="panel-settings"}get hasComponents(){return this.components&&this.components.length>0}get componentStructure(){return this.components?this.components.map((e,a)=>({id:e.id||a,label:this.getComponentLabel(e.type),type:e.type,preview:this.getComponentPreview(e)})):[]}getComponentLabel(e){const a=A.find(t=>t.type===e);return a?a.label:e.charAt(0).toUpperCase()+e.slice(1)}getComponentPreview(e){if(!e.props)return`ID: ${e.id}`;const a=e.props;switch(e.type){case"hero":return a.title||a.subtitle||`ID: ${e.id}`;case"features":return a.title||`${a.items?.length||0} items`;case"footer":return a.copyright||`ID: ${e.id}`;default:return Object.values(a)[0]||`ID: ${e.id}`}}handleDragStart(e){const a=e.currentTarget.dataset.type;e.dataTransfer.setData("type",a),e.dataTransfer.effectAllowed="copy"}handleThemeChange(e){this.selectedThemeLayout=e.target.value}handleBrandSetChange(e){this.selectedBrandSet=e.target.value}handleColorChange(e){const a=e.target.dataset.id,t=e.target.value;this.colors={...this.colors,[a]:t},this.applyTheme(this.colors),this.saveBrandingToLocalStorage()}applyTheme(e){const a={};e.primary&&(a["--s-bg-primary"]=e.primary,a["--s-bg-primary-hover"]=this.adjustColor(e.primary,-20),a["--p-color-brand-600"]=e.primary,a["--s-border-focus"]=e.primary),e.background&&(a["--s-bg-page"]=e.background,a["--s-bg-surface"]=e.background),e.text&&(a["--s-text-primary"]=e.text,a["--s-text-secondary"]=this.adjustColor(e.text,40));const t=e.typography||this.typography;t.primary&&(a["--s-font-family-body"]=`${t.primary}, sans-serif`,a["--s-font-family"]=`${t.primary}, sans-serif`),t.heading&&(a["--s-font-family-heading"]=`${t.heading}, serif`),this.dispatchEvent(new CustomEvent("themechange",{detail:{theme:a}}))}adjustColor(e,a){return"#"+e.replace(/^#/,"").replace(/../g,t=>("0"+Math.min(255,Math.max(0,parseInt(t,16)+a)).toString(16)).substr(-2))}handleFontChange(e){const a=e.target.dataset.id,t=e.target.value;this.typography={...this.typography,[a]:t},this.applyTheme({...this.colors,typography:this.typography}),this.saveBrandingToLocalStorage()}async saveBrandingToLocalStorage(){try{const e={...this.colors,typography:this.typography};localStorage.setItem("brandingColors",JSON.stringify(e)),this.currentSiteId?(await ga(this.currentSiteId,{colors:this.colors,typography:this.typography,layout:this.themeLayout}),console.log("\u2713 Branding saved to database:",e)):console.warn("\u26A0\uFE0F No site ID available, theme saved to localStorage only")}catch(e){console.error("Failed to store branding",e)}}handleSaveSmartSet(){console.log("Saving Smart Set...")}handleComponentSelect(e){const a=e.currentTarget.dataset.id;console.log("Selected component:",a),this.dispatchEvent(new CustomEvent("componentselect",{detail:{componentId:a}}))}handleBackToStructure(){this.dispatchEvent(new CustomEvent("componentdeselect"))}handlePropertyChange(e){const a=e.target.dataset.name,t=e.target.value;this.dispatchEvent(new CustomEvent("propertychange",{detail:{componentId:this.selectedComponent.id,triggeringField:a,props:{...this.selectedComponent.props,[a]:t}}}))}handleComponentDeleteFromTree(e){e.stopPropagation();const a=e.currentTarget.dataset.id;this.dispatchEvent(new CustomEvent("componentdeletefromtree",{detail:{componentId:a}}))}handleAddPage(){const e=this.pages.length+1,a=`Page ${e}`,t=`/page-${e}`;this.dispatchEvent(new CustomEvent("pageadd",{detail:{name:a,slug:t}}))}handlePageSelect(e){const a=e.currentTarget.closest(".page-item").dataset.id;this.pages=this.pages.map(t=>({...t,isActive:t.id===a})),this.dispatchEvent(new CustomEvent("pageselect",{detail:{pageId:a}}))}handlePageRename(e){e.stopPropagation();const a=e.currentTarget.dataset.id,t=this.pages.find(n=>n.id===a),o=prompt("Enter new page name:",t.name);o&&o.trim()!==""&&o!==t.name&&this.dispatchEvent(new CustomEvent("pagerename",{detail:{pageId:a,name:o.trim()}}))}handlePageDelete(e){e.stopPropagation();const a=e.currentTarget.dataset.id;if(this.pages.length<=1){alert("Cannot delete the last page");return}this.pages=this.pages.filter(t=>t.id!==a),this.dispatchEvent(new CustomEvent("pagedelete",{detail:{pageId:a}}))}handleSettingChange(e){const a=e.target.dataset.field,t=e.target.value;this.siteSettings={...this.siteSettings,[a]:t},console.log("Setting changed:",a,t)}handleCheckboxChange(e){const a=e.target.dataset.field,t=e.target.checked;this.siteSettings={...this.siteSettings,[a]:t},console.log("Checkbox changed:",a,t)}handleExportSite(){console.log("Exporting site with settings:",this.siteSettings),this.dispatchEvent(new CustomEvent("exportsite",{detail:{settings:this.siteSettings}})),alert(`Exporting as ${this.siteSettings.exportFormat.toUpperCase()}...`)}}U.renderMode="light",v(U,{publicProps:{activeTab:{config:0},components:{config:0},pages:{config:0},selectedComponent:{config:0}},track:{siteSettings:1},fields:["themeLayoutOptions","brandSetOptions","fontOptions","selectedThemeLayout","selectedBrandSet","colors","typography"]});const ba=x(U,{tmpl:ca,sel:"custom-side-panel",apiVersion:66});function ya(s,e,a){var t=s?"["+s+"-host]":"";return(e?":host {":t+" {")+"display: block;}"}var ie=[ya];const va=r`<section class="container${0}"${"s0"}${2}><div class="grid${0}"${2}><div class="col-span-12${0}" style="text-align: center; z-index: 1; position: relative;"${2}><h1${"s3"}${3}>${"t4"}</h1><p${"s5"}${3}>${"t6"}</p><div style="display: flex; gap: 1rem; justify-content: center;"${3}><a href="#" class="btn btn--primary btn--lg${0}"${2}>${"t9"}</a><a href="#" class="btn btn--secondary btn--lg${0}"${2}>${"t11"}</a></div></div></div></section>`;function S(s,e,a,t){const{d:o,sp:n,st:i}=s;return[i(va,1,[n(0,{style:e.sectionStyle},null),n(3,{style:e.headlineStyle},null),n(4,null,o(e.title)),n(5,{style:e.subtitleStyle},null),n(6,null,o(e.subtitle)),n(9,null,o(e.ctaText)),n(11,null,o(e.ctaSecondaryText))])]}var xa=b(S);S.stylesheets=[],S.stylesheetToken="lwc-chdq17c5gt",S.legacyStylesheetToken="components-hero_hero",ie&&S.stylesheets.push.apply(S.stylesheets,ie),y(S);class W extends ${constructor(...e){super(...e);this.title="Welcome to FlexSite",this.subtitle="Built with the Custom CSS Framework",this.ctaText="Get Started",this.ctaSecondaryText="Learn More",this.backgroundImage="",this.textColor="#ffffff"}get sectionStyle(){const e="padding: 4rem 0;";return this.backgroundImage?`${e} background-image: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('${this.backgroundImage}'); background-size: cover; background-position: center; position: relative;`:e}get headlineStyle(){return`font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem; color: ${this.textColor}; text-shadow: 0 2px 4px rgba(0,0,0,0.5);`}get subtitleStyle(){return`font-size: 1.25rem; margin-bottom: 2rem; color: ${this.textColor}; opacity: 0.95; text-shadow: 0 1px 2px rgba(0,0,0,0.5);`}}W.renderMode="light",v(W,{publicProps:{title:{config:0},subtitle:{config:0},ctaText:{config:0},ctaSecondaryText:{config:0},backgroundImage:{config:0},textColor:{config:0}}});const $a=x(W,{tmpl:xa,sel:"components-hero",apiVersion:66}),wa=r`<section class="container${0}" style="padding: 4rem 0;"${2}><h2 style="text-align: center; margin-bottom: 2rem;"${3}>${"t2"}</h2><div class="grid${0}"${2}><div class="col-span-4${0}"${2}><div class="card${0}" style="height: 100%;"${2}><div class="card-header${0}"${2}><h3 class="card-title${0}"${2}>Drag &amp; Drop</h3></div><div class="card-body${0}"${2}><p style="color: var(--s-text-secondary);"${3}>Easily build pages by dragging components.</p></div></div></div><div class="col-span-4${0}"${2}><div class="card${0}" style="height: 100%;"${2}><div class="card-header${0}"${2}><h3 class="card-title${0}"${2}>Responsive</h3></div><div class="card-body${0}"${2}><p style="color: var(--s-text-secondary);"${3}>Layouts adapt perfectly to any device size.</p></div></div></div><div class="col-span-4${0}"${2}><div class="card${0}" style="height: 100%;"${2}><div class="card-header${0}"${2}><h3 class="card-title${0}"${2}>Customizable</h3></div><div class="card-body${0}"${2}><p style="color: var(--s-text-secondary);"${3}>Powered by your Custom CSS Framework.</p></div></div></div></div></section>`;function I(s,e,a,t){const{d:o,sp:n,st:i}=s;return[i(wa,1,[n(2,null,o(e.title))])]}var ka=b(I);I.stylesheets=[],I.stylesheetToken="lwc-32bflh7ts20",I.legacyStylesheetToken="components-features_features",y(I);class J extends ${constructor(...e){super(...e);this.title="Features"}}J.renderMode="light",v(J,{publicProps:{title:{config:0}}});const _a=x(J,{tmpl:ka,sel:"components-features",apiVersion:66});function Ca(s,e,a){var t=s?"["+s+"-host]":"";return(e?":host {":t+" {")+"display: block;}"}var le=[Ca];const Sa=r`<footer class="container${0}" style="padding: 2rem 0; border-top: 1px solid var(--s-border-default); margin-top: 4rem;"${2}><div class="grid${0}"${2}><div class="col-span-6${0}"${2}><strong style="color: var(--s-text-primary);"${3}>FlexSite</strong><p style="color: var(--s-text-secondary); font-size: 0.875rem;"${3}>${"t6"}</p></div><div class="col-span-6${0}" style="text-align: right;"${2}><a href="#" style="color: var(--s-text-secondary); margin-left: 1rem; text-decoration: none;"${3}>Privacy</a><a href="#" style="color: var(--s-text-secondary); margin-left: 1rem; text-decoration: none;"${3}>Terms</a></div></div></footer>`;function T(s,e,a,t){const{d:o,sp:n,st:i}=s;return[i(Sa,1,[n(6,null,o(e.copyright))])]}var Ta=b(T);T.stylesheets=[],T.stylesheetToken="lwc-6rvlaincsff",T.legacyStylesheetToken="components-footer_footer",le&&T.stylesheets.push.apply(T.stylesheets,le),y(T);class Y extends ${constructor(...e){super(...e);this.copyright="\xA9 2026 FlexSite"}get year(){return new Date().getFullYear()}}Y.renderMode="light",v(Y,{publicProps:{copyright:{config:0}}});const La=x(Y,{tmpl:Ta,sel:"components-footer",apiVersion:66});function Pa(s,e,a){var t=s?"["+s+"]":"";return".text-block-wrapper"+t+" {padding: 2rem 0;max-width: 800px;margin: 0 auto;}.text-content"+t+" h2"+t+" {font-size: 2rem;margin-bottom: 1rem;color: var(--s-text-heading);}.text-content"+t+" p"+t+" {font-size: 1.1rem;line-height: 1.6;color: var(--s-text-body);}"}var ce=[Pa];const Ha=r`<h2${3}>${"t1"}</h2>`,Ma={classMap:{"text-block-wrapper":!0},key:0},Ia={classMap:{"text-content":!0},context:{lwc:{dom:"manual"}},key:3};function L(s,e,a,t){const{d:o,sp:n,st:i,h:p}=s;return[p("div",Ma,[e.heading?i(Ha,2,[n(1,null,o(e.heading))]):null,p("div",Ia)])]}var Va=b(L);L.stylesheets=[],L.stylesheetToken="lwc-45ig5r15g8s",L.legacyStylesheetToken="components-textBlock_textBlock",ce&&L.stylesheets.push.apply(L.stylesheets,ce),y(L);class q extends ${constructor(...e){super(...e);this.heading=void 0,this._content=void 0}get content(){return this._content}set content(e){this._content=e,this.renderHtml()}renderedCallback(){this.renderHtml()}renderHtml(){if(this._content){const e=this.querySelector(".text-content");e&&(e.innerHTML=this._content)}}}q.renderMode="light",v(q,{publicProps:{heading:{config:0},content:{config:3}},fields:["_content"]});const Da=x(q,{tmpl:Va,sel:"components-text-block",apiVersion:66});function Ea(s,e,a){var t=s?"["+s+"]":"";return".image-block"+t+" {margin: 2rem 0;text-align: center;}.img-responsive"+t+" {max-width: 100%;height: auto;border-radius: 8px;box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);}figcaption"+t+" {margin-top: 0.5rem;font-size: 0.9rem;color: var(--s-text-secondary);font-style: italic;}"}var de=[Ea];const Aa=r`<img${"a0:src"}${"a0:alt"} class="img-responsive${0}"${2}>`,Fa=r`<figcaption${3}>${"t1"}</figcaption>`,Ba={classMap:{"image-block":!0},key:0};function P(s,e,a,t){const{sp:o,st:n,d:i,fr:p,h:l}=s;return[l("figure",Ba,[n(Aa,2,[o(0,{attrs:{src:e.src,alt:e.alt}},null)]),e.caption?p(3,[n(Fa,5,[o(1,null,i(e.caption))])],0):null])]}var Na=b(P);P.stylesheets=[],P.stylesheetToken="lwc-12le0dtu3tq",P.legacyStylesheetToken="components-imageBlock_imageBlock",de&&P.stylesheets.push.apply(P.stylesheets,de),y(P);class G extends ${constructor(...e){super(...e);this.src="",this.alt="",this.caption=""}}G.renderMode="light",v(G,{publicProps:{src:{config:0},alt:{config:0},caption:{config:0}}});const za=x(G,{tmpl:Na,sel:"components-image-block",apiVersion:66});function ja(s,e,a){var t=s?"["+s+"]":"";return".card-block"+t+" {background: #fff;border-radius: 8px;box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);padding: 1.5rem;margin: 1rem auto;max-width: 400px;transition: transform 0.2s;border: 1px solid var(--s-border-light);}.card-block:hover"+t+" {transform: translateY(-2px);box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);}.card-title"+t+" {font-size: 1.25rem;margin-bottom: 0.5rem;color: var(--s-text-heading);}.card-text"+t+" {color: var(--s-text-body);margin-bottom: 1.5rem;}"}var pe=[ja];const Oa=r`<h3 class="card-title${0}"${2}>${"t1"}</h3>`,Ra=r`<p class="card-text${0}"${2}>${"t1"}</p>`,Za=r`<button class="btn btn--primary${0}"${2}>${"t1"}</button>`,Ua={classMap:{"card-block":!0},key:0},Wa={classMap:{"card-body":!0},key:1};function H(s,e,a,t){const{d:o,sp:n,st:i,b:p,fr:l,h}=s,{_m0:w,_m1:m}=t;return[h("div",Ua,[h("div",Wa,[i(Oa,3,[n(1,null,o(e.title))]),i(Ra,5,[n(1,null,o(e.content))]),e.action?l(6,[i(Za,8,[n(0,{on:m||(t._m1={click:p(e.handleAction)})},null),n(1,null,o(e.action))])],0):null])])]}var Ja=b(H);H.stylesheets=[],H.stylesheetToken="lwc-1b4mq7pplq",H.legacyStylesheetToken="components-cardBlock_cardBlock",pe&&H.stylesheets.push.apply(H.stylesheets,pe),y(H);class X extends ${constructor(...e){super(...e);this.title="",this.content="",this.action=""}handleAction(){console.log("Card action clicked")}}X.renderMode="light",v(X,{publicProps:{title:{config:0},content:{config:0},action:{config:0}}});const Ya=x(X,{tmpl:Ja,sel:"components-card-block",apiVersion:66}),qa=r`<div class="empty-state${0}"${2}><h3${3}>Start Building</h3><p${3}>Drag and drop components from the left panel</p></div>`,Ga=r`<div class="component-overlay${0}"${2}><span class="component-label${0}"${2}>${"t2"}</span><button class="delete-btn${0}" title="Remove component"${"a3:data-index"}${2}><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"${3}><path d="M18 6L6 18M6 6l12 12"${3}/></svg></button></div>`,Xa=r`<div${"c0"}${2}>${"t1"}</div>`,Ka={classMap:{"builder-root":!0},key:0},Qa={classMap:{workspace:!0},key:2},eo={classMap:{"left-container":!0},key:3},to={classMap:{"canvas-area":!0},key:6},ao={classMap:{"canvas-viewport":!0},key:7},oo={"canvas-container":!0};function M(s,e,a,t){const{b:o,c:n,h:i,st:p,fr:l,ncls:h,k:w,d:m,sp:d,i:V,f:Q}=s,{_m0:F,_m1:B,_m2:N,_m3:ee,_m4:z,_m5:j}=t;return[i("div",Ka,[n("components-header",Be,{props:{isSaving:e.isSaving},key:1,on:F||(t._m0={save:o(e.handleSave),preview:o(e.handlePreview)})}),i("div",Qa,[i("div",eo,[n("custom-activity-bar",Oe,{props:{activeTab:e.activeTab},key:4,on:B||(t._m1={tabselect:o(e.handleTabSelect)})}),n("custom-side-panel",ba,{props:{activeTab:e.activeTab,components:e.componentList,pages:e.pagesList,selectedComponent:e.selectedComponent},key:5,on:N||(t._m2={componentdeletefromtree:o(e.handleComponentDeleteFromTree),componentselect:o(e.handleComponentSelect),componentdeselect:o(e.handleComponentDeselect),propertychange:o(e.handlePropertyChange),pageadd:o(e.handlePageAdd),pageselect:o(e.handlePageSelect),pagerename:o(e.handlePageRename),pagedelete:o(e.handlePageDelete),exportsite:o(e.handleExportSite),themechange:o(e.handleThemeChange)})})]),i("div",to,[i("div",ao,[i("div",{classMap:oo,style:e.canvasStyle,key:8,on:ee||(t._m3={dragover:o(e.handleDragOver),drop:o(e.handleCanvasDrop)})},Q([e.isEmpty?l(9,[p(qa,11)],0):null,V(e.componentList,function(g,D){return i("div",{className:h(g.containerClass),attrs:{draggable:"true","data-index":D,"data-id":g.id},key:w(12,g.id),on:z||(t._m4={dragstart:o(e.handleItemDragStart),dragover:o(e.handleItemDragOver),drop:o(e.handleItemDrop),click:o(e.handleComponentSelect)})},[p(Ga,14,[d(2,null,m(g.type)),d(3,{on:j||(t._m5={click:o(e.handleComponentDeleteWrapper)}),attrs:{"data-index":D}},null)]),g.isHero?l(15,[n("components-hero",$a,{props:{title:g.props.title,subtitle:g.props.subtitle,ctaText:g.props.ctaText,ctaSecondaryText:g.props.ctaSecondaryText,backgroundImage:g.props.backgroundImage,textColor:g.props.textColor},key:16})],0):null,g.isFeatures?l(17,[n("components-features",_a,{props:{title:g.props.title},key:18})],0):null,g.isFooter?l(19,[n("components-footer",La,{props:{copyright:g.props.copyright},key:20})],0):null,g.isText?l(21,[n("components-text-block",Da,{props:{heading:g.props.heading,content:g.props.content},key:22})],0):null,g.isImage?l(23,[n("components-image-block",za,{props:{src:g.props.src,alt:g.props.alt,caption:g.props.caption},key:24})],0):null,g.isCard?l(25,[n("components-card-block",Ya,{props:{title:g.props.title,content:g.props.content,action:g.props.action},key:26})],0):null])})]))])])]),e.notification.show?p(Xa,28,[d(0,{className:h(e.notificationClass)},null),d(1,null,m(e.notification.message))]):null])]}var so=b(M);M.stylesheets=[],M.stylesheetToken="lwc-vnpm67aa0i",M.legacyStylesheetToken="custom-builder_builder",te&&M.stylesheets.push.apply(M.stylesheets,te),y(M);class K extends ${constructor(...e){super(...e);this.activeTab="panel-build",this.componentList=[],this.pagesList=[],this.activePageId=null,this.isSaving=!1,this.isLoading=!1,this.notification={show:!1,message:"",type:""},this.selectedComponentId=null,this.theme={"--s-bg-primary":"#3b82f6","--s-text-primary":"#1f2937","--s-bg-page":"#ffffff","--s-font-family":"Inter, sans-serif"},this.selectedComponentId=null}get canvasStyle(){return Object.entries(this.theme).map(([e,a])=>`${e}: ${a}`).join(";")}async connectedCallback(){await this.loadCanvasData()}async loadCanvasData(){try{this.isLoading=!0;const a=new URLSearchParams(window.location.search).get("site"),t=await Z(a);this.siteId=t.id,this.pagesList=t.pages.map(n=>({id:n.id,name:n.name,slug:n.slug,isActive:n.id===t.activePageId}));const o=this.activePageId||t.activePageId||(this.pagesList[0]?this.pagesList[0].id:null);o?await this.loadPage(o):this.showNotification("No pages found in site.","warning")}catch(e){console.error("Failed to load canvas data:",e),this.showNotification("Failed to load saved data","error")}finally{this.isLoading=!1}}async loadPage(e){try{this.isLoading=!0;const a=await ma(e);this.activePageId=e,this.pagesList=this.pagesList.map(t=>({...t,isActive:t.id===e})),a.layout&&a.layout.sections?this.componentList=a.layout.sections.map(t=>({id:t.id||Date.now(),type:t.type,isHero:t.type==="hero",isFeatures:t.type==="features",isFooter:t.type==="footer",isText:t.type==="text",isImage:t.type==="image",isCard:t.type==="card",props:t.props||t.properties||{},containerClass:`builder-block ${t.id&&this.selectedComponentId&&t.id.toString()===this.selectedComponentId.toString()?"selected":""}`})):this.componentList=[],this.showNotification(`Loaded page: ${a.name}`,"success")}catch(a){console.error(`Failed to load page ${e}:`,a),this.showNotification("Failed to load page data","error"),this.componentList=[]}finally{this.isLoading=!1}}handleTabSelect(e){this.activeTab=e.detail}async handleSave(){if(!(this.isSaving||!this.activePageId))try{this.isSaving=!0,console.log("\u{1F4BE} Saving canvas state...");const e=this.buildPageState(),a=await re(this.activePageId,e);if(a.success)this.showNotification("Page saved successfully!","success"),console.log("\u2713 Save successful:",a);else throw new Error("Save failed")}catch(e){console.error("\u274C Save error:",e),this.showNotification("Failed to save page. Please try again.","error")}finally{this.isSaving=!1}}buildPageState(){const e=this.pagesList.find(a=>a.id===this.activePageId)||{};return{id:this.activePageId,name:e.name||"Untitled Page",slug:e.slug||"/",layout:{sections:this.componentList.map(a=>({id:a.id.toString(),type:a.type,properties:a.props||{},rows:[]}))},metadata:{createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}}handlePreview(){if(console.log("\u{1F50D} Opening preview mode..."),!this.activePageId){this.showNotification("No page selected to preview","warning");return}const e=`/preview/${this.activePageId}`;window.open(e,"_blank"),this.showNotification("Preview opened in new tab","info")}handleDragOver(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}handleCanvasDrop(e){e.preventDefault();const a=e.dataTransfer.getData("type");a&&!e.dataTransfer.getData("reorder-index")&&this.addComponent(a)}handleItemDragStart(e){const a=e.currentTarget.dataset.index;e.dataTransfer.setData("reorder-index",a),e.dataTransfer.effectAllowed="move"}handleItemDragOver(e){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",e.currentTarget.classList.add("drop-target")}handleItemDrop(e){e.preventDefault(),e.stopPropagation(),e.currentTarget.classList.remove("drop-target");const a=parseInt(e.dataTransfer.getData("reorder-index"),10),t=parseInt(e.currentTarget.dataset.index,10),o=e.dataTransfer.getData("type");!isNaN(a)&&a!==t?this.reorderComponent(a,t):o&&isNaN(a)&&this.addComponent(o,t+1)}addComponent(e,a=null){const t={id:Date.now(),type:e,isHero:e==="hero",isFeatures:e==="features",isFooter:e==="footer",isText:e==="text",isImage:e==="image",isCard:e==="card",props:this.getDefaultProps(e)};if(a!==null){const o=[...this.componentList];o.splice(a,0,t),this.componentList=o}else this.componentList=[...this.componentList,t];this.selectedComponentId=t.id,this.updateComponentListState()}reorderComponent(e,a){const t=[...this.componentList],[o]=t.splice(e,1);t.splice(a,0,o),this.componentList=t}handleComponentDrop(e){this.addComponent(e.detail.type,e.detail.index)}handleComponentDelete(e){const a=e.detail.index,t=[...this.componentList];t.splice(a,1),this.componentList=t}handleComponentReorder(e){const{fromIndex:a,toIndex:t}=e.detail,o=[...this.componentList],[n]=o.splice(a,1);o.splice(t,0,n),this.componentList=o}getDefaultProps(e){const a=A.find(t=>t.type===e);return a?{...a.defaultProps}:{}}showNotification(e,a="info"){this.notification={show:!0,message:e,type:a},setTimeout(()=>{this.notification={show:!1,message:"",type:""}},3e3)}get notificationClass(){return`notification notification-${this.notification.type} ${this.notification.show?"show":""}`}async handleComponentDeleteFromTree(e){const a=e.detail.componentId;console.log("Deleting component from tree:",a),this.componentList=this.componentList.filter(t=>t.id.toString()!==a.toString()),await this.handleSave(),this.showNotification("Component deleted and saved","success")}handleComponentSelect(e){const a=e.currentTarget?.dataset?.id||e.detail?.componentId;console.log("Component selected:",a),a&&(this.selectedComponentId=a,this.activeTab="panel-structure",this.updateComponentListState())}handleComponentDeselect(){this.selectedComponentId=null,this.updateComponentListState()}handleComponentDeleteWrapper(e){e.stopPropagation();const a=parseInt(e.currentTarget.dataset.index,10),t=[...this.componentList];t.splice(a,1),this.componentList=t,this.showNotification("Component removed","info")}handleThemeChange(e){this.theme={...this.theme,...e.detail.theme}}async handlePropertyChange(e){const{componentId:a,props:t}=e.detail;console.log("Property changed for component:",a,t),this.componentList=this.componentList.map(o=>o.id.toString()===a.toString()?{...o,props:{...o.props,...t}}:o);try{await fa(a,{props:t})}catch(o){console.error("Failed to save property change:",o),this.showNotification("Failed to save changes","error")}}get selectedComponent(){return this.componentList.find(e=>e.id.toString()===this.selectedComponentId?.toString())||null}updateComponentListState(){this.componentList=this.componentList.map(e=>({...e,containerClass:`builder-block ${e.id.toString()===this.selectedComponentId?.toString()?"selected":""}`}))}async handlePageAdd(e){const{name:a,slug:t}=e.detail;console.log("Creating new page:",a);try{if(this.isLoading=!0,!this.siteId){const n=await Z();this.siteId=n.id}const o=await ha(this.siteId,a,t);console.log("\u2713 Page created:",o),this.showNotification(`Page "${o.name||o.title||a}" created successfully`,"success"),await this.loadCanvasData(),await this.handlePageSelect({detail:{pageId:o.id}})}catch(o){console.error("Failed to create page:",o),this.showNotification("Failed to create page","error")}finally{this.isLoading=!1}}async handlePageSelect(e){const a=e.detail.pageId;console.log("Switching to page:",a),a!==this.activePageId&&await this.loadPage(a)}async handlePageRename(e){const{pageId:a,name:t}=e.detail;console.log("Renaming page:",a,"to",t);try{this.isLoading=!0;const o="/"+t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");await re(a,{name:t,slug:o}),this.showNotification(`Page renamed to "${t}" (Slug: ${o})`,"success"),await this.loadCanvasData()}catch(o){console.error("Failed to rename page:",o),this.showNotification("Failed to rename page","error")}finally{this.isLoading=!1}}async handlePageDelete(e){const a=e.detail.pageId;if(!!confirm("Are you sure you want to delete this page? This cannot be undone.")){console.log("Deleting page:",a);try{this.isLoading=!0,await ua(a),this.showNotification("Page deleted successfully","success"),await this.loadCanvasData()}catch(t){console.error("Failed to delete page:",t);const o=t.message||"Unknown error";this.showNotification(`Failed to delete page: ${o}`,"error")}finally{this.isLoading=!1}}}handleExportSite(e){const a=e.detail.settings;console.log("Exporting site with settings:",a),this.showNotification(`Exporting as ${a.exportFormat.toUpperCase()}...`,"info")}}K.renderMode="light",v(K,{track:{activeTab:1,componentList:1,pagesList:1,activePageId:1,isSaving:1,isLoading:1,notification:1,selectedComponentId:1,theme:1}});const no=x(K,{tmpl:so,sel:"custom-builder",apiVersion:66});export{no as default};
